<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Âú®ÂÆÖÁôÇÈ§ä„ÇíÊîØ„Åà„ÇãË®™ÂïèÁúãË≠∑ - COPD‰∫ã‰æã</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --primary-color: #2d5a27;
            --secondary-color: #4a7c43;
            --accent-color: #8bc34a;
            --bg-dark: #1a1a2e;
            --bg-light: #f5f5f5;
            --text-dark: #333;
            --text-light: #fff;
        }

        body {
            font-family: 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'Noto Sans JP', sans-serif;
            background: var(--bg-dark);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* „Çø„Ç§„Éà„É´ÁîªÈù¢ */
        #titleScreen {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('maps/map_town.png');
            background-size: cover;
            background-position: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 3000;
            color: white;
            text-align: center;
        }

        #titleScreen h1 {
            font-size: 2.5em;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        #titleScreen h2 {
            font-size: 1.3em;
            font-weight: normal;
            margin-bottom: 30px;
            opacity: 0.9;
        }

        .title-info {
            background: rgba(255,255,255,0.1);
            padding: 20px 40px;
            border-radius: 15px;
            margin-bottom: 40px;
            line-height: 1.8;
        }

        .title-info p {
            font-size: 0.95em;
            opacity: 0.9;
        }

        #startButton {
            padding: 20px 60px;
            font-size: 1.4em;
            background: linear-gradient(135deg, #fff, #e8e8e8);
            color: var(--primary-color);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            font-weight: bold;
        }

        #startButton:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.4);
        }

        /* MAPÁîªÈù¢ */
        #mapScreen, #hospitalMapScreen, #homeMapScreen {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: var(--bg-dark);
            z-index: 2000;
            display: none;
        }

        .map-container {
            width: 100%;
            height: 100%;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .map-wrapper {
            position: relative;
            max-width: 100%;
            max-height: 100%;
        }

        .map-wrapper img {
            max-width: 100vw;
            max-height: 100vh;
            object-fit: contain;
        }

        .location-marker {
            position: absolute;
            width: 60px;
            height: 60px;
            transform: translate(-50%, -100%);
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .location-marker:hover {
            transform: translate(-50%, -100%) scale(1.15);
        }

        .marker-icon {
            width: 100%;
            height: 100%;
            border-radius: 50% 50% 50% 0;
            transform: rotate(-45deg);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 4px solid white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.4);
        }

        .marker-icon span {
            transform: rotate(45deg);
            font-size: 28px;
        }

        .marker-icon.home { background: #3498db; }
        .marker-icon.hospital { background: #e74c3c; }
        .marker-icon.pharmacy { background: #2ecc71; }
        .marker-icon.clinic { background: #9b59b6; }
        .marker-icon.nursing { background: #e91e63; }

        .marker-label {
            position: absolute;
            top: 65px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 5px 12px;
            border-radius: 8px;
            font-size: 12px;
            white-space: nowrap;
            font-weight: bold;
        }

        .location-marker.next-destination .marker-icon {
            animation: pulse-marker 1.5s infinite;
        }

        /* ÁÑ°Âäπ„Å™„Éû„Éº„Ç´„ÉºÔºà„Åæ„Å†ÈÅ∏Êäû„Åß„Åç„Å™„ÅÑÔºâ */
        .location-marker.disabled {
            opacity: 0.3;
            pointer-events: none;
        }

        .location-marker.disabled .marker-icon {
            filter: grayscale(100%);
        }

        /* Ë®™ÂïèÊ∏à„Åø„Éû„Éº„Ç´„Éº */
        .location-marker.completed .marker-icon {
            opacity: 0.6;
        }

        .location-marker.completed::after {
            content: "‚úì";
            position: absolute;
            top: -10px;
            right: -10px;
            background: #4CAF50;
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @keyframes pulse-marker {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.8); }
            50% { box-shadow: 0 0 25px 15px rgba(255, 215, 0, 0.3); }
        }

        .location-marker.next-destination::after {
            content: "‚ñº Ê¨°„Å∏";
            position: absolute;
            top: -35px;
            left: 50%;
            transform: translateX(-50%);
            background: #FFD700;
            color: #333;
            padding: 5px 12px;
            border-radius: 10px;
            font-size: 12px;
            font-weight: bold;
            white-space: nowrap;
            animation: bounce-arrow 1s infinite;
        }

        @keyframes bounce-arrow {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(5px); }
        }

        .location-marker.visited .marker-icon {
            opacity: 0.5;
        }

        .location-marker.current .marker-icon {
            border-color: #FFD700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
        }


        .map-header {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 15px 30px;
            border-radius: 15px;
            text-align: center;
            z-index: 100;
        }

        .map-header h3 {
            font-size: 1.2em;
            margin-bottom: 5px;
        }

        .map-header p {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .map-legend {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(255,255,255,0.95);
            padding: 15px 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 100;
        }

        .map-legend h4 {
            margin-bottom: 10px;
            color: #333;
            font-size: 0.95em;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 5px 0;
            font-size: 0.85em;
            color: #666;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
        }

        /* „É°„Ç§„É≥„Ç≤„Éº„É†ÁîªÈù¢ */
        #gameScreen {
            display: none;
            width: 100%;
            height: 100vh;
            position: relative;
        }

        #backgroundLayer {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-size: cover;
            background-position: center;
            background-color: #2d2d44;
            transition: background-image 0.5s ease;
        }

        #characterLayer {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            padding-bottom: 220px;
            pointer-events: none;
        }

        .character-slot {
            position: absolute;
            bottom: 220px;
            max-width: 300px;
            max-height: 400px;
            transition: all 0.3s ease;
        }

        .character-slot.left { left: 10%; }
        .character-slot.center { left: 50%; transform: translateX(-50%); }
        .character-slot.right { right: 10%; }

        .character-slot img,
        .character-slot video {
            max-width: 100%;
            max-height: 400px;
            object-fit: contain;
            filter: drop-shadow(0 5px 15px rgba(0,0,0,0.3));
            border-radius: 10px;
        }

        .character-slot video {
            background: transparent;
        }

        #dialogBox {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.95), rgba(0,0,0,0.85));
            padding: 20px 30px;
            min-height: 200px;
        }

        #speakerName {
            display: inline-block;
            background: var(--primary-color);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 1em;
        }

        #speakerName.narrator { background: #6b8e23; }
        #speakerName.thought { background: #4682b4; font-style: italic; }

        #dialogText {
            color: white;
            font-size: 1.15em;
            line-height: 1.8;
            min-height: 80px;
        }

        #dialogText.thought {
            font-style: italic;
            color: #b0c4de;
        }

        #navButtons {
            position: absolute;
            bottom: 15px;
            right: 30px;
            display: flex;
            gap: 15px;
        }

        .nav-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .nav-btn.prev { background: #666; color: white; }
        .nav-btn.next { background: var(--accent-color); color: var(--text-dark); }

        .nav-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        #progressBar {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: rgba(255,255,255,0.2);
        }

        #progressFill {
            height: 100%;
            background: var(--accent-color);
            transition: width 0.3s ease;
        }

        #sceneHeader {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 0.9em;
        }

        .back-to-map {
            position: absolute;
            top: 15px;
            left: 15px;
            z-index: 100;
            background: rgba(0,0,0,0.7);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .back-to-map:hover { background: rgba(0,0,0,0.9); }

        #audioControls {
            position: fixed;
            bottom: 220px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1500;
        }

        .audio-btn {
            padding: 10px 15px;
            border: none;
            border-radius: 20px;
            background: rgba(0,0,0,0.7);
            color: white;
            cursor: pointer;
            font-size: 0.85em;
            transition: all 0.3s ease;
        }

        .audio-btn:hover { background: rgba(0,0,0,0.9); }
        .audio-btn.off { background: #c62828; }

        /* „Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥„Ç≥„É≥„Éà„É≠„Éº„É´ */
        #navControlPanel {
            position: fixed;
            top: 15px;
            left: 20px;
            display: flex;
            gap: 10px;
            z-index: 3500;
        }

        .nav-control-btn {
            padding: 10px 15px;
            border: none;
            border-radius: 20px;
            background: rgba(0,0,0,0.7);
            color: white;
            cursor: pointer;
            font-size: 0.85em;
            transition: all 0.3s ease;
        }

        .nav-control-btn:hover { background: rgba(0,0,0,0.9); }

        /* „Ç∑„Éº„É≥ÈÅ∏Êäû„Éë„Éç„É´ */
        #sceneSelectPanel {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 4000;
        }

        .scene-select-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .scene-select-content h3 {
            margin-bottom: 20px;
            color: var(--primary-color);
            text-align: center;
        }

        .scene-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .scene-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            background: #f5f5f5;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .scene-item:hover { background: #e0e0e0; }
        .scene-item.completed { background: #e8f5e9; }
        .scene-item.current { background: #fff3e0; border: 2px solid #ff9800; }
        .scene-item.locked { opacity: 0.5; pointer-events: none; }

        .scene-number {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
        }

        .scene-item.completed .scene-number { background: #4CAF50; }
        .scene-item.locked .scene-number { background: #9e9e9e; }

        .scene-title { flex: 1; font-weight: 500; }

        .scene-close-btn {
            margin-top: 20px;
            width: 100%;
            padding: 12px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1em;
        }

        /* Áü•Ë≠òËß£Ë™¨„Éë„Éç„É´ */
        #knowledgePanel {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2500;
            padding: 20px;
        }

        .knowledge-content {
            background: white;
            border-radius: 20px;
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .knowledge-header {
            background: var(--primary-color);
            color: white;
            padding: 20px;
            border-radius: 20px 20px 0 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .knowledge-header h3 { font-size: 1.3em; }

        .knowledge-body {
            padding: 25px;
            line-height: 1.8;
            color: var(--text-dark);
            white-space: pre-line;
        }

        .knowledge-close {
            display: block;
            width: 100%;
            padding: 15px;
            background: var(--secondary-color);
            color: white;
            border: none;
            font-size: 1.1em;
            cursor: pointer;
            border-radius: 0 0 20px 20px;
        }

        .knowledge-close:hover { background: var(--primary-color); }

        /* „ÇØ„Ç§„Ç∫„Éë„Éç„É´ */
        #quizPanel {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2500;
            padding: 20px;
        }

        .quiz-content {
            background: white;
            border-radius: 20px;
            max-width: 650px;
            width: 100%;
            max-height: 85vh;
            overflow-y: auto;
        }

        .quiz-header {
            background: #ff9800;
            color: white;
            padding: 20px;
            border-radius: 20px 20px 0 0;
        }

        .quiz-header h3 {
            font-size: 1.2em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quiz-question {
            padding: 20px;
            font-size: 1.1em;
            line-height: 1.6;
            color: var(--text-dark);
            border-bottom: 1px solid #eee;
        }

        .quiz-options { padding: 15px; }

        .quiz-option {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            margin: 10px 0;
            background: #f8f9fa;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-option:hover:not(.disabled) {
            border-color: #ff9800;
            background: #fff3e0;
        }

        .quiz-option.selected {
            border-color: #2196f3;
            background: #e3f2fd;
        }

        .quiz-option.correct {
            border-color: #4caf50;
            background: #e8f5e9;
        }

        .quiz-option.incorrect {
            border-color: #f44336;
            background: #ffebee;
        }

        .quiz-option.disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        .option-marker {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .quiz-feedback {
            display: none;
            padding: 20px;
            margin: 15px;
            border-radius: 10px;
            line-height: 1.6;
        }

        .quiz-feedback.show { display: block; }

        .quiz-feedback.correct {
            background: #e8f5e9;
            border: 2px solid #4caf50;
            color: #2e7d32;
        }

        .quiz-feedback.incorrect {
            background: #ffebee;
            border: 2px solid #f44336;
            color: #c62828;
        }

        .quiz-submit {
            display: block;
            width: calc(100% - 30px);
            margin: 15px;
            padding: 15px;
            background: #ff9800;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            font-weight: bold;
        }

        .quiz-submit:hover:not(:disabled) { background: #f57c00; }
        .quiz-submit:disabled { background: #ccc; cursor: not-allowed; }

        .quiz-continue {
            display: none;
            width: calc(100% - 30px);
            margin: 15px;
            padding: 15px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            font-weight: bold;
        }

        .quiz-continue:hover { background: var(--secondary-color); }

        /* „É¨„Çπ„Éù„É≥„Ç∑„Éñ */
        @media (max-width: 768px) {
            #titleScreen h1 { font-size: 1.8em; }
            #titleScreen h2 { font-size: 1.1em; }
            .title-info { padding: 15px 20px; }
            #startButton { padding: 15px 40px; font-size: 1.2em; }

            .location-marker { width: 50px; height: 50px; }
            .marker-icon span { font-size: 22px; }

            .character-slot { max-width: 180px; max-height: 250px; }
            .character-slot img { max-height: 250px; }
            .character-slot.left { left: 5%; }
            .character-slot.right { right: 5%; }

            #dialogBox { padding: 15px 20px; min-height: 180px; }
            #dialogText { font-size: 1em; }
            #navButtons { right: 20px; gap: 10px; }
            .nav-btn { padding: 10px 20px; font-size: 0.9em; }

            #characterLayer { padding-bottom: 190px; }
            .character-slot { bottom: 190px; }
            #audioControls { bottom: 190px; }

            .map-legend { display: none; }
        }
    </style>
</head>
<body>
    <!-- „Çø„Ç§„Éà„É´ÁîªÈù¢ -->
    <div id="titleScreen">
        <h1>Âú®ÂÆÖÁôÇÈ§ä„ÇíÊîØ„Åà„ÇãË®™ÂïèÁúãË≠∑</h1>
        <h2>COPD‰∫ã‰æã „ÄúËÅñÈö∑‰∏ÄÁî∑„Åï„Çì„ÅÆÁâ©Ë™û„Äú</h2>
        <div class="title-info">
            <p>ÊÇ£ËÄÖÔºöËÅñÈö∑‰∏ÄÁî∑„Åï„ÇìÔºà78Ê≠≥Ôºâ</p>
            <p>ÁñæÊÇ£ÔºöCOPDÔºàÊÖ¢ÊÄßÈñâÂ°ûÊÄßËÇ∫ÁñæÊÇ£Ôºâ</p>
            <p>Ê≤ªÁôÇÔºöÂú®ÂÆÖÈÖ∏Á¥†ÁôÇÊ≥ï</p>
            <p>ÂÖ®12„Ç∑„Éº„É≥„Éª77„Ç´„ÉÉ„Éà„Éª10Âïè„ÅÆ„ÇØ„Ç§„Ç∫</p>
        </div>
        <button id="startButton">Â≠¶Áøí„ÇíÈñãÂßã„Åô„Çã</button>
    </div>

    <!-- MAPÁîªÈù¢ -->
    <div id="mapScreen">
        <div class="map-header">
            <h3 id="mapTitle">MAP„ÅßÂ†¥ÊâÄ„ÇíÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ</h3>
            <p id="mapInstruction">ÂÖâ„Å£„Å¶„ÅÑ„Çã„Éû„Éº„Ç´„Éº„Çí„ÇØ„É™„ÉÉ„ÇØ</p>
        </div>
        <div class="map-container">
            <div class="map-wrapper" id="mapWrapper">
                <img src="maps/map_town.png" alt="Ë°ó‰∏¶„ÅøMAP" id="mapImage">
                <!-- ÁóÖÈô¢„Éû„Éº„Ç´„ÉºÔºàÂ∑¶‰∏ã„ÅÆËµ§ÂçÅÂ≠óÂª∫Áâ©Ôºâ -->
                <div class="location-marker" data-location="hospital" style="left: 15%; top: 72%;">
                    <div class="marker-icon hospital"><span>üè•</span></div>
                    <div class="marker-label">Á∑èÂêàÁóÖÈô¢</div>
                </div>
                <!-- Ëá™ÂÆÖ„Éû„Éº„Ç´„ÉºÔºà‰∏≠Â§Æ„ÅÆ‰ΩèÂÆÖË°óÔºâ -->
                <div class="location-marker" data-location="home" style="left: 55%; top: 55%;">
                    <div class="marker-icon home"><span>üè†</span></div>
                    <div class="marker-label">ËÅñÈö∑„Åï„ÇìÂÆÖ</div>
                </div>
                <!-- Ëñ¨Â±Ä„Éû„Éº„Ç´„ÉºÔºàÁ∑ëÂçÅÂ≠ó„ÅÆÂª∫Áâ©Ôºâ -->
                <div class="location-marker" data-location="pharmacy" style="left: 38%; top: 48%;">
                    <div class="marker-icon pharmacy"><span>üíä</span></div>
                    <div class="marker-label">Ëñ¨Â±Ä</div>
                </div>
                <!-- Ë®™ÂïèÁúãË≠∑„Çπ„ÉÜ„Éº„Ç∑„Éß„É≥„Éû„Éº„Ç´„ÉºÔºà‰∏≠Â§ÆÈÅìË∑ØÊ≤ø„ÅÑÂè≥ÂÅ¥Â••„ÅÆÈßêËªäÂ†¥„ÅÆ„ÅÇ„ÇãÂª∫Áâ©Ôºâ -->
                <div class="location-marker" data-location="nursing" style="left: 52%; top: 25%;">
                    <div class="marker-icon nursing"><span>üë©‚Äç‚öïÔ∏è</span></div>
                    <div class="marker-label">Ë®™ÂïèÁúãË≠∑„Çπ„ÉÜ„Éº„Ç∑„Éß„É≥</div>
                </div>
                <!-- „ÇØ„É™„Éã„ÉÉ„ÇØ„Éû„Éº„Ç´„ÉºÔºàÂè≥‰∏ã„ÅÆÁôΩ„ÅÑÂª∫Áâ©Ôºâ -->
                <div class="location-marker" data-location="clinic" style="left: 70%; top: 75%;">
                    <div class="marker-icon clinic"><span>ü©∫</span></div>
                    <div class="marker-label">„ÇØ„É™„Éã„ÉÉ„ÇØ</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ÁóÖÈô¢MAPÁîªÈù¢ -->
    <div id="hospitalMapScreen" style="display: none;">
        <div class="map-header">
            <h3 id="hospitalMapTitle">ÁóÖÈô¢ÂÜÖMAP</h3>
            <p id="hospitalMapInstruction">Â†¥ÊâÄ„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>
        </div>
        <button class="back-to-map" id="backToTownFromHospital" style="position: absolute; top: 80px; left: 20px; z-index: 100;">‚Üê Ë°ó‰∏¶„ÅøMAP</button>
        <div class="map-container">
            <div class="map-wrapper" id="hospitalMapWrapper">
                <img src="maps/map_hospital.png" alt="ÁóÖÈô¢ÂÜÖMAP" id="hospitalMapImage">
                <!-- ÁóÖÂÆ§„Éû„Éº„Ç´„Éº -->
                <div class="location-marker sub-marker" data-location="hospital_room" data-scene="2" style="left: 75%; top: 35%;">
                    <div class="marker-icon hospital"><span>üõèÔ∏è</span></div>
                    <div class="marker-label">ÁóÖÂÆ§</div>
                </div>
                <!-- ÂæÖÂêàÂÆ§„Éû„Éº„Ç´„Éº -->
                <div class="location-marker sub-marker" data-location="waiting_room" style="left: 30%; top: 65%;">
                    <div class="marker-icon hospital"><span>ü™ë</span></div>
                    <div class="marker-label">ÂæÖÂêàÂÆ§</div>
                </div>
                <!-- „Éä„Éº„Çπ„Çπ„ÉÜ„Éº„Ç∑„Éß„É≥„Éû„Éº„Ç´„Éº -->
                <div class="location-marker sub-marker" data-location="nurse_station" style="left: 45%; top: 40%;">
                    <div class="marker-icon hospital"><span>üë©‚Äç‚öïÔ∏è</span></div>
                    <div class="marker-label">„Éä„Éº„Çπ„Çπ„ÉÜ„Éº„Ç∑„Éß„É≥</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ëá™ÂÆÖMAPÁîªÈù¢ -->
    <div id="homeMapScreen" style="display: none;">
        <div class="map-header">
            <h3 id="homeMapTitle">Ëá™ÂÆÖÂÜÖMAP</h3>
            <p id="homeMapInstruction">Â†¥ÊâÄ„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>
        </div>
        <button class="back-to-map" id="backToTownFromHome" style="position: absolute; top: 80px; left: 20px; z-index: 100;">‚Üê Ë°ó‰∏¶„ÅøMAP</button>
        <div class="map-container">
            <div class="map-wrapper" id="homeMapWrapper">
                <img src="maps/map_home.png" alt="Ëá™ÂÆÖÂÜÖMAP" id="homeMapImage">
                <!-- „É™„Éì„É≥„Ç∞„Éû„Éº„Ç´„Éº -->
                <div class="location-marker sub-marker" data-location="home_living" data-scene="3" style="left: 40%; top: 45%;">
                    <div class="marker-icon home"><span>üõãÔ∏è</span></div>
                    <div class="marker-label">„É™„Éì„É≥„Ç∞</div>
                </div>
                <!-- ÂØùÂÆ§„Éû„Éº„Ç´„Éº -->
                <div class="location-marker sub-marker" data-location="home_bedroom" data-scene="4" style="left: 60%; top: 80%;">
                    <div class="marker-icon home"><span>üõèÔ∏è</span></div>
                    <div class="marker-label">ÂØùÂÆ§</div>
                </div>
                <!-- Êµ¥ÂÆ§„Éû„Éº„Ç´„Éº -->
                <div class="location-marker sub-marker" data-location="home_bathroom" data-scene="5" style="left: 82%; top: 35%;">
                    <div class="marker-icon home"><span>üõÅ</span></div>
                    <div class="marker-label">Êµ¥ÂÆ§</div>
                </div>
            </div>
        </div>
    </div>

    <!-- „É°„Ç§„É≥„Ç≤„Éº„É†ÁîªÈù¢ -->
    <div id="gameScreen">
        <div id="progressBar"><div id="progressFill"></div></div>
        <div id="backgroundLayer"></div>
        <div id="characterLayer">
            <div class="character-slot left" id="charLeft"></div>
            <div class="character-slot center" id="charCenter"></div>
            <div class="character-slot right" id="charRight"></div>
        </div>
        <div id="sceneHeader"></div>
        <button class="back-to-map" id="backToMap">‚Üê MAP</button>
        <div id="dialogBox">
            <div id="speakerName"></div>
            <div id="dialogText"></div>
            <div id="navButtons">
                <button class="nav-btn prev" id="prevBtn">‚Üê Êàª„Çã</button>
                <button class="nav-btn next" id="nextBtn">Ê¨°„Å∏ ‚Üí</button>
            </div>
        </div>
        <div id="audioControls">
            <button class="audio-btn" id="bgmToggle">BGM ON</button>
            <button class="audio-btn" id="voiceToggle">Èü≥Â£∞ ON</button>
        </div>
    </div>

    <!-- Áü•Ë≠òËß£Ë™¨„Éë„Éç„É´ -->
    <div id="knowledgePanel">
        <div class="knowledge-content">
            <div class="knowledge-header">
                <span>üìö</span>
                <h3 id="knowledgeTitle"></h3>
            </div>
            <div class="knowledge-body" id="knowledgeText"></div>
            <button class="knowledge-close" id="knowledgeClose">ÁêÜËß£„Åó„Åæ„Åó„Åü</button>
        </div>
    </div>

    <!-- „ÇØ„Ç§„Ç∫„Éë„Éç„É´ -->
    <div id="quizPanel">
        <div class="quiz-content">
            <div class="quiz-header">
                <h3><span>‚ùì</span> Á¢∫Ë™ç„ÇØ„Ç§„Ç∫</h3>
            </div>
            <div class="quiz-question" id="quizQuestion"></div>
            <div class="quiz-options" id="quizOptions"></div>
            <div class="quiz-feedback" id="quizFeedback"></div>
            <button class="quiz-submit" id="quizSubmit">ÂõûÁ≠î„Åô„Çã</button>
            <button class="quiz-continue" id="quizContinue">Ê¨°„Å∏ÈÄ≤„ÇÄ</button>
        </div>
    </div>

    <!-- „Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥„Ç≥„É≥„Éà„É≠„Éº„É´ -->
    <div id="navControlPanel">
        <button class="nav-control-btn" id="restartBtn">üîÑ ÊúÄÂàù„Åã„Çâ</button>
        <button class="nav-control-btn" id="sceneSelectBtn">üìã „Ç∑„Éº„É≥ÈÅ∏Êäû</button>
    </div>

    <!-- „Ç∑„Éº„É≥ÈÅ∏Êäû„Éë„Éç„É´ -->
    <div id="sceneSelectPanel">
        <div class="scene-select-content">
            <h3>üìã „Ç∑„Éº„É≥ÈÅ∏Êäû</h3>
            <div class="scene-list" id="sceneList"></div>
            <button class="scene-close-btn" id="sceneSelectClose">Èñâ„Åò„Çã</button>
        </div>
    </div>

    <script>
    // „Ç∑„Éº„É≥‚ÜíÂ†¥ÊâÄ„Éû„ÉÉ„Éî„É≥„Ç∞
    const SCENE_LOCATION_MAP = {
        1: null,        // „Ç§„É≥„Éà„É≠
        2: 'hospital',  // ÈÄÄÈô¢Ââç„Ç´„É≥„Éï„Ç°
        3: 'home',      // ÈÄÄÈô¢„ÉªÂ∏∞ÂÆÖ
        4: 'home',      // Ë®™ÂïèÁúãË≠∑ÔºàÂàùÂõûÔºâ
        5: 'home',      // ÂÖ•Êµ¥‰ªãÂä©
        6: 'home',      // ÂëºÂê∏„É™„Éè„Éì„É™
        7: 'pharmacy',  // Ëñ¨Â±Ä
        8: 'clinic',    // „Åã„Åã„Çä„Å§„ÅëÂåª
        9: 'home',      // „Ç±„Ç¢„Éû„ÉçË®™Âïè
        10: 'home',     // Â¶ª„Å®„ÅÆ‰ºöË©±
        11: 'home',     // ÊÄ•Â§âÊôÇ„ÅÆÂØæÂøú
        12: null        // „Ç®„É≥„Éá„Ç£„É≥„Ç∞
    };

    // „Ç∑„Éº„É≥ÈÅ∑Áßª„Éû„ÉÉ„Éî„É≥„Ç∞
    const SCENE_FLOW = [
        { sceneId: 1, nextLocation: 'hospital' },
        { sceneId: 2, nextLocation: 'home' },
        { sceneId: 3, nextLocation: 'home' },
        { sceneId: 4, nextLocation: 'home' },
        { sceneId: 5, nextLocation: 'home' },
        { sceneId: 6, nextLocation: 'pharmacy' },
        { sceneId: 7, nextLocation: 'clinic' },
        { sceneId: 8, nextLocation: 'home' },
        { sceneId: 9, nextLocation: 'home' },
        { sceneId: 10, nextLocation: 'home' },
        { sceneId: 11, nextLocation: null },
        { sceneId: 12, nextLocation: null }
    ];

    // Ë°®ÊÉÖ„Ç¨„Ç§„Éâ„Éá„Éº„ÇøÔºàcutId„Çí„Ç≠„Éº„Å´„Åó„ÅüË°®ÊÉÖÊÉÖÂ†±Ôºâ
    const expressionGuide = {};

    // expression_guide.json„Åã„ÇâË°®ÊÉÖ„Éá„Éº„Çø„ÇíÊßãÁØâ
    const expressionGuideData = {
        "scenes": [
            {"sceneId": 1, "cuts": [{"cutId": "s01_01", "characters": []}, {"cutId": "s01_02", "characters": []}, {"cutId": "s01_03", "characters": []}]},
            {"sceneId": 2, "cuts": [
                {"cutId": "s02_01", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_02_worried"}, {"id": "doctor", "position": "right", "expression": "doctor_07_serious"}]},
                {"cutId": "s02_02", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_04_thinking"}, {"id": "doctor", "position": "right", "expression": "doctor_05_neutral"}]},
                {"cutId": "s02_03", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_02_worried"}, {"id": "doctor", "position": "right", "expression": "doctor_04_thinking"}]},
                {"cutId": "s02_04", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_02_worried"}, {"id": "doctor", "position": "right", "expression": "doctor_05_neutral"}]},
                {"cutId": "s02_05", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "doctor", "position": "right", "expression": "doctor_07_serious"}]},
                {"cutId": "s02_06", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_07_serious"}, {"id": "doctor", "position": "right", "expression": "doctor_02_worried"}]}
            ]},
            {"sceneId": 3, "cuts": [
                {"cutId": "s03_01", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_06_relieved"}, {"id": "ichiko", "position": "right", "expression": "ichiko_01_smile"}]},
                {"cutId": "s03_02", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_01_smile"}, {"id": "ichiko", "position": "right", "expression": "ichiko_01_smile"}]},
                {"cutId": "s03_03", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_09_grateful"}, {"id": "ichiko", "position": "right", "expression": "ichiko_01_smile"}]},
                {"cutId": "s03_04", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "ichiko", "position": "right", "expression": "ichiko_04_thinking"}]},
                {"cutId": "s03_05", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_01_smile"}, {"id": "ichiko", "position": "right", "expression": "ichiko_05_neutral"}]},
                {"cutId": "s03_06", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "ichiko", "position": "right", "expression": "ichiko_01_smile"}]}
            ]},
            {"sceneId": 4, "cuts": [
                {"cutId": "s04_01", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "yamada", "position": "right", "expression": "yamada_01_smile"}]},
                {"cutId": "s04_02", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_09_grateful"}, {"id": "yamada", "position": "right", "expression": "yamada_01_smile"}]},
                {"cutId": "s04_03", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "yamada", "position": "right", "expression": "yamada_05_neutral"}]},
                {"cutId": "s04_04", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_medical_05_neutral"}, {"id": "yamada", "position": "right", "expression": "yamada_01_smile"}]},
                {"cutId": "s04_05", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_medical_05_neutral"}, {"id": "yamada", "position": "right", "expression": "yamada_04_thinking"}]},
                {"cutId": "s04_06", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "yamada", "position": "right", "expression": "yamada_05_neutral"}]},
                {"cutId": "s04_07", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "yamada", "position": "right", "expression": "yamada_07_serious"}]}
            ]},
            {"sceneId": 5, "cuts": [
                {"cutId": "s05_01", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "yamada", "position": "right", "expression": "yamada_01_smile"}]},
                {"cutId": "s05_02", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "ichiko", "position": "right", "expression": "ichiko_01_smile"}]},
                {"cutId": "s05_03", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "yamada", "position": "right", "expression": "yamada_05_neutral"}]},
                {"cutId": "s05_04", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_02_worried"}, {"id": "yamada", "position": "right", "expression": "yamada_05_neutral"}]},
                {"cutId": "s05_05", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "yamada", "position": "right", "expression": "yamada_01_smile"}]},
                {"cutId": "s05_06", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_06_relieved"}, {"id": "yamada", "position": "right", "expression": "yamada_01_smile"}]},
                {"cutId": "s05_07", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "yamada", "position": "right", "expression": "yamada_05_neutral"}]}
            ]},
            {"sceneId": 6, "cuts": [
                {"cutId": "s06_01", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "yamada", "position": "right", "expression": "yamada_01_smile"}]},
                {"cutId": "s06_02", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_02_worried"}, {"id": "yamada", "position": "right", "expression": "yamada_05_neutral"}]},
                {"cutId": "s06_03", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "yamada", "position": "right", "expression": "yamada_07_serious"}]},
                {"cutId": "s06_04", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "yamada", "position": "right", "expression": "yamada_05_neutral"}]},
                {"cutId": "s06_05", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_medical_03_pursed_lip"}, {"id": "yamada", "position": "right", "expression": "yamada_05_neutral"}]},
                {"cutId": "s06_06", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_01_smile"}, {"id": "yamada", "position": "right", "expression": "yamada_01_smile"}]},
                {"cutId": "s06_07", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_01_smile"}, {"id": "yamada", "position": "right", "expression": "yamada_05_neutral"}]},
                {"cutId": "s06_08", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_01_smile"}, {"id": "yamada", "position": "right", "expression": "yamada_01_smile"}]}
            ]},
            {"sceneId": 7, "cuts": [
                {"cutId": "s07_01", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "pharmacist", "position": "right", "expression": "pharmacist_05_neutral"}]},
                {"cutId": "s07_02", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "pharmacist", "position": "right", "expression": "pharmacist_01_smile"}]},
                {"cutId": "s07_03", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_01_smile"}, {"id": "pharmacist", "position": "right", "expression": "pharmacist_05_neutral"}]},
                {"cutId": "s07_04", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "pharmacist", "position": "right", "expression": "pharmacist_01_smile"}]},
                {"cutId": "s07_05", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "pharmacist", "position": "right", "expression": "pharmacist_07_serious"}]},
                {"cutId": "s07_06", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "pharmacist", "position": "right", "expression": "pharmacist_01_smile"}]}
            ]},
            {"sceneId": 8, "cuts": [
                {"cutId": "s08_01", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "doctor", "position": "right", "expression": "doctor_01_smile"}]},
                {"cutId": "s08_02", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_01_smile"}, {"id": "doctor", "position": "right", "expression": "doctor_05_neutral"}]},
                {"cutId": "s08_03", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "doctor", "position": "right", "expression": "doctor_02_worried"}]},
                {"cutId": "s08_04", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_02_worried"}, {"id": "doctor", "position": "right", "expression": "doctor_05_neutral"}]},
                {"cutId": "s08_05", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "doctor", "position": "right", "expression": "doctor_05_neutral"}]},
                {"cutId": "s08_06", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "doctor", "position": "right", "expression": "doctor_07_serious"}]},
                {"cutId": "s08_07", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "doctor", "position": "right", "expression": "doctor_05_neutral"}]},
                {"cutId": "s08_08", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "doctor", "position": "right", "expression": "doctor_01_smile"}]}
            ]},
            {"sceneId": 9, "cuts": [
                {"cutId": "s09_01", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "sato", "position": "right", "expression": "sato_01_smile"}]},
                {"cutId": "s09_02", "characters": [{"id": "ichiko", "position": "left", "expression": "ichiko_01_smile"}, {"id": "sato", "position": "right", "expression": "sato_05_neutral"}]},
                {"cutId": "s09_03", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "sato", "position": "right", "expression": "sato_01_smile"}]},
                {"cutId": "s09_04", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_02_worried"}, {"id": "sato", "position": "right", "expression": "sato_05_neutral"}]},
                {"cutId": "s09_05", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "sato", "position": "right", "expression": "sato_01_smile"}]},
                {"cutId": "s09_06", "characters": [{"id": "ichiko", "position": "left", "expression": "ichiko_02_worried"}, {"id": "sato", "position": "right", "expression": "sato_05_neutral"}]},
                {"cutId": "s09_07", "characters": [{"id": "ichiko", "position": "left", "expression": "ichiko_05_neutral"}, {"id": "sato", "position": "right", "expression": "sato_07_serious"}]}
            ]},
            {"sceneId": 10, "cuts": [
                {"cutId": "s10_01", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "ichiko", "position": "right", "expression": "ichiko_01_smile"}]},
                {"cutId": "s10_02", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_02_worried"}, {"id": "ichiko", "position": "right", "expression": "ichiko_05_neutral"}]},
                {"cutId": "s10_03", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "ichiko", "position": "right", "expression": "ichiko_02_worried"}]},
                {"cutId": "s10_04", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_02_worried"}, {"id": "ichiko", "position": "right", "expression": "ichiko_05_neutral"}]},
                {"cutId": "s10_05", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_05_neutral"}, {"id": "ichiko", "position": "right", "expression": "ichiko_01_smile"}]},
                {"cutId": "s10_06", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_01_smile"}, {"id": "ichiko", "position": "right", "expression": "ichiko_05_neutral"}]},
                {"cutId": "s10_07", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_01_smile"}, {"id": "ichiko", "position": "right", "expression": "ichiko_01_smile"}]},
                {"cutId": "s10_08", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_09_grateful"}, {"id": "ichiko", "position": "right", "expression": "ichiko_01_smile"}]}
            ]},
            {"sceneId": 11, "cuts": [
                {"cutId": "s11_01", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_medical_04_cyanosis"}, {"id": "ichiko", "position": "right", "expression": "ichiko_02_worried"}]},
                {"cutId": "s11_02", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_medical_04_cyanosis"}, {"id": "ichiko", "position": "right", "expression": "ichiko_02_worried"}]},
                {"cutId": "s11_03", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_medical_04_cyanosis"}, {"id": "yamada", "position": "right", "expression": "yamada_07_serious"}]},
                {"cutId": "s11_04", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_medical_04_cyanosis"}, {"id": "yamada", "position": "right", "expression": "yamada_07_serious"}]},
                {"cutId": "s11_05", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_medical_04_cyanosis"}, {"id": "yamada", "position": "right", "expression": "yamada_05_neutral"}]},
                {"cutId": "s11_06", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_medical_04_cyanosis"}, {"id": "yamada", "position": "right", "expression": "yamada_04_thinking"}]},
                {"cutId": "s11_07", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_medical_04_cyanosis"}, {"id": "yamada", "position": "right", "expression": "yamada_05_neutral"}]},
                {"cutId": "s11_08", "characters": [{"id": "ichiko", "position": "left", "expression": "ichiko_02_worried"}, {"id": "yamada", "position": "right", "expression": "yamada_07_serious"}]},
                {"cutId": "s11_09", "characters": [{"id": "ichiko", "position": "left", "expression": "ichiko_05_neutral"}, {"id": "yamada", "position": "right", "expression": "yamada_05_neutral"}]}
            ]},
            {"sceneId": 12, "cuts": [
                {"cutId": "s12_01", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_medical_09_recovering"}, {"id": "yamada", "position": "right", "expression": "yamada_01_smile"}]},
                {"cutId": "s12_02", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_06_relieved"}, {"id": "yamada", "position": "right", "expression": "yamada_05_neutral"}]},
                {"cutId": "s12_03", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_medical_05_neutral"}, {"id": "yamada", "position": "right", "expression": "yamada_01_smile"}]},
                {"cutId": "s12_04", "characters": [{"id": "ichiko", "position": "left", "expression": "ichiko_09_grateful"}, {"id": "yamada", "position": "right", "expression": "yamada_05_neutral"}]},
                {"cutId": "s12_05", "characters": [{"id": "ichiko", "position": "left", "expression": "ichiko_01_smile"}, {"id": "yamada", "position": "right", "expression": "yamada_01_smile"}]},
                {"cutId": "s12_06", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_01_smile"}, {"id": "yamada", "position": "right", "expression": "yamada_05_neutral"}]},
                {"cutId": "s12_07", "characters": [{"id": "kazuo", "position": "left", "expression": "kazuo_general_01_smile"}, {"id": "yamada", "position": "right", "expression": "yamada_01_smile"}]}
            ]},
            {"sceneId": 13, "cuts": [
                {"cutId": "s13_01", "characters": []},
                {"cutId": "s13_02", "characters": []},
                {"cutId": "s13_03", "characters": []},
                {"cutId": "s13_04", "characters": [{"id": "kazuo", "position": "center", "expression": "kazuo_general_09_grateful"}]},
                {"cutId": "s13_05", "characters": []},
                {"cutId": "s13_06", "characters": []}
            ]}
        ]
    };

    // cutId„Çí„Ç≠„Éº„Å´„Åó„Åü„Éû„ÉÉ„Éó„Çí‰ΩúÊàê
    expressionGuideData.scenes.forEach(scene => {
        scene.cuts.forEach(cut => {
            expressionGuide[cut.cutId] = cut.characters;
        });
    });

    // „Ç∑„Éä„É™„Ç™„Éá„Éº„Çø
    const scenarioData = {
        "scenes": [
            {
                "id": 1,
                "title": "„Ç§„É≥„Éà„É≠",
                "background": "map_town",
                "bgm": "main_theme",
                "cuts": [
                    {"id": "s01_01", "speaker": "narration", "text": "‰ªäÂõû„ÅÆ‰∏ª‰∫∫ÂÖ¨„ÅØËÅñÈö∑‰∏ÄÁî∑„Åï„Çì„ÄÅ78Ê≠≥„ÅÆÁî∑ÊÄß„Åß„Åô„ÄÇÂÖÉÂÖ¨ÂãôÂì°„Åß„ÄÅÂÆöÂπ¥Âæå„ÅØÂ¶ª„ÅÆÂ∏ÇÂ≠ê„Åï„Çì„Å®„Ç¥„É´„Éï„ÇÑÊóÖË°å„ÇíÊ•Ω„Åó„Çì„Åß„ÅÑ„Åæ„Åó„Åü„ÄÇ"},
                    {"id": "s01_02", "speaker": "narration", "text": "3Âπ¥Ââç„Å´COPD„ÄÅÊÖ¢ÊÄßÈñâÂ°ûÊÄßËÇ∫ÁñæÊÇ£„Å®Ë®∫Êñ≠„Åï„Çå„ÄÅÂú®ÂÆÖÈÖ∏Á¥†ÁôÇÊ≥ï„ÇíÈñãÂßã„ÄÇÂÖàÊúà„ÄÅ„Ç≥„É≠„ÉäÊÑüÊüì„Åã„ÇâÊÄ•ÊÄßÂ¢óÊÇ™„ÇíËµ∑„Åì„ÅóÂÖ•Èô¢„Åó„Åæ„Åó„Åü„Åå„ÄÅÈÄÄÈô¢„Åó„Å¶Ëá™ÂÆÖÁôÇÈ§ä„ÇíÂßã„ÇÅ„Åü„Å®„Åì„Çç„Åß„Åô„ÄÇ"},
                    {"id": "s01_03", "speaker": "narration", "text": "‰∏ÄÁî∑„Åï„Çì„ÅÆË¶ñÁÇπ„Åß„ÄÅË®™ÂïèÁúãË≠∑„ÇÑÂú∞Âüü„ÅÆÂ§öËÅ∑Á®ÆÈÄ£Êê∫„Çí‰ΩìÈ®ì„Åó„Å¶„Åø„Åæ„Åó„Çá„ÅÜ„ÄÇ"}
                ],
                "knowledge": {
                    "title": "COPD„Å®„ÅØ",
                    "text": "COPDÔºàChronic Obstructive Pulmonary DiseaseÔºâ„ÅØ„ÄÅ„Çø„Éê„Ç≥ÁÖô„Å™„Å©„ÅÆÊúâÂÆ≥Áâ©Ë≥™„ÇíÈï∑Êúü„Å´Âê∏ÂÖ•„Åô„Çã„Åì„Å®„ÅßÁîü„Åò„ÇãËÇ∫„ÅÆÁÇéÁóáÊÄßÁñæÊÇ£„Åß„Åô„ÄÇ\n\n„ÉªËÇ∫ËÉû„ÅÆÁ†¥Â£äÔºàËÇ∫Ê∞óËÖ´Ôºâ„Å®Ê∞óÈÅì„ÅÆÁÇéÁóá„Å´„Çà„ÇäÊ∞óÊµÅÂà∂Èôê„ÅåÁîü„Åò„Çã\n„ÉªÊó•Êú¨„Åß„ÅØÁ¥Ñ530‰∏á‰∫∫‰ª•‰∏ä„ÅÆÊÇ£ËÄÖ„Åå„ÅÑ„Çã„Å®Êé®ÂÆö\n„Éª‰∏ª„Å™ÁóáÁä∂ÔºöÊÅØÂàá„Çå„ÄÅÊÖ¢ÊÄßÁöÑ„Å™Âí≥„ÉªÁó∞\n„ÉªÂñ´ÁÖô„ÅåÊúÄÂ§ß„ÅÆÂç±Èô∫Âõ†Â≠ê"
                }
            },
            {
                "id": 2,
                "title": "ÈÄÄÈô¢Ââç„Ç´„É≥„Éï„Ç°",
                "background": "hospital_room",
                "bgm": "medical",
                "cuts": [
                    {"id": "s02_01", "speaker": "doctor", "text": "ËÅñÈö∑„Åï„Çì„ÄÅÂÖ•Èô¢‰∏≠„ÅÆÊ≤ªÁôÇ„ÅßÂøÉ‰∏çÂÖ®„ÅÆÁóáÁä∂„ÅØÊîπÂñÑ„Åó„Åæ„Åó„Åü„ÄÇ„Åü„Å†„ÄÅËÇ∫„ÅÆÁä∂ÊÖã„ÅØ‰ª•Ââç„Çà„ÇäÊÇ™Âåñ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ", "characters": ["kazuo", "doctor"]},
                    {"id": "s02_02", "speaker": "kazuo", "type": "thought", "text": "„ÇÑ„Å£„Å±„ÇäÊÇ™„Åè„Å™„Å£„Å¶„ÅÑ„Çã„ÅÆ„Åã„ÄÇ„Åß„ÇÇÂÆ∂„Å´Â∏∞„Çä„Åü„ÅÑ„ÄÇ", "characters": ["kazuo", "doctor"]},
                    {"id": "s02_03", "speaker": "doctor", "text": "Â§úÈñì„ÅÆNPPV„ÄÅÈùû‰æµË•≤ÁöÑÈôΩÂúßÊèõÊ∞óÁôÇÊ≥ï„ÇíËá™ÂÆÖ„Åß„ÇÇÁ∂ö„Åë„Çã„Åì„Å®„Çí„ÅäÂãß„ÇÅ„Åó„Åæ„Åô„Åå„ÄÅ„ÅÑ„Åã„Åå„Åß„Åô„ÅãÔºü", "characters": ["kazuo", "doctor"]},
                    {"id": "s02_04", "speaker": "kazuo", "text": "ÂÖàÁîü„ÄÅ„ÅÇ„ÅÆÊ©üÊ¢∞„ÅØÁú†„Çå„Å™„ÅÑ„Åó„ÄÅ„Å§„Åë„Çã„ÅÆ„ÇÇÂ§ßÂ§â„Åß„ÄÇÈÖ∏Á¥†„Å†„Åë„Åß„Å™„Çì„Å®„Åã„Å™„Çä„Åæ„Åõ„Çì„ÅãÔºü", "characters": ["kazuo", "doctor"]},
                    {"id": "s02_05", "speaker": "doctor", "text": "„ÅîÊú¨‰∫∫„ÅÆÊÑèÊÄù„ÇíÂ∞äÈáç„Åó„Åæ„Åô„ÄÇ„Åü„Å†„ÄÅÊÄ•ÊÄßÂ¢óÊÇ™„ÅÆ„É™„Çπ„ÇØ„ÅØÈ´ò„ÅÑ„Åì„Å®„Çí„ÅîÁêÜËß£„Åè„Å†„Åï„ÅÑ„ÄÇ‰Ωï„Åã„ÅÇ„Å£„Åü„Çâ„Åô„Åê„Å´ÈÄ£Áµ°„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ", "characters": ["kazuo", "doctor"]},
                    {"id": "s02_06", "speaker": "kazuo", "text": "„Çè„Åã„Çä„Åæ„Åó„Åü„ÄÇÊÇ™„Åè„Å™„Çã„Å™„Çâ„ÄÅ„Åù„Çå„ÇÇÂØøÂëΩ„Åã„Å™„Å®ÊÄù„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ", "characters": ["kazuo", "doctor"]}
                ],
                "knowledge": {
                    "title": "NPPV„Å®„ÅØ",
                    "text": "NPPVÔºàÈùû‰æµË•≤ÁöÑÈôΩÂúßÊèõÊ∞óÁôÇÊ≥ïÔºâ„ÅØ„ÄÅ„Éû„Çπ„ÇØ„Çí‰ªã„Åó„Å¶ÈôΩÂúß„Çí„Åã„ÅëÂëºÂê∏„ÇíË£úÂä©„Åô„ÇãÊ≤ªÁôÇÊ≥ï„Åß„Åô„ÄÇ\n\n„ÉªÊ∞óÁÆ°ÊåøÁÆ°„Åå‰∏çË¶Å„Å™„Åü„ÇÅ„ÄåÈùû‰æµË•≤ÁöÑ„Äç\n„ÉªCOPDÊÄ•ÊÄßÂ¢óÊÇ™ÊôÇ„ÅÆÁ¨¨‰∏ÄÈÅ∏ÊäûÊ≤ªÁôÇ\n„Éª„Éû„Çπ„ÇØ„ÅÆ‰∏çÂø´ÊÑü„Åã„ÇâÁ∂ôÁ∂ö„ÅåÈõ£„Åó„ÅÑÊÇ£ËÄÖ„ÇÇ\n„ÉªÊÇ£ËÄÖ„ÅÆÊÑèÊÄùÊ±∫ÂÆö„ÇíÂ∞äÈáç„Åô„Çã„Åì„Å®„ÅåÈáçË¶Å"
                },
                "quiz": {
                    "question": "COPDÊÄ•ÊÄßÂ¢óÊÇ™ÊôÇ„ÅÆ‰∫∫Â∑•ÂëºÂê∏ÁÆ°ÁêÜ„Å®„Åó„Å¶„ÄÅÊúÄÂàù„Å´ÈÅ∏Êäû„Åï„Çå„Çã„Åì„Å®„ÅåÂ§ö„ÅÑ„ÅÆ„ÅØ„Å©„Çå„ÅãÔºü",
                    "options": [
                        {"text": "Ê∞óÁÆ°ÊåøÁÆ°„Å´„Çà„Çã‰∫∫Â∑•ÂëºÂê∏", "correct": false},
                        {"text": "NPPVÔºàÈùû‰æµË•≤ÁöÑÈôΩÂúßÊèõÊ∞óÁôÇÊ≥ïÔºâ", "correct": true},
                        {"text": "È´òÊµÅÈáèÈºª„Ç´„Éã„É•„É©ÈÖ∏Á¥†ÁôÇÊ≥ï", "correct": false},
                        {"text": "„Éç„Éñ„É©„Ç§„Ç∂„ÉºÂê∏ÂÖ•", "correct": false}
                    ]
                }
            },
            {
                "id": 3,
                "title": "ÈÄÄÈô¢„ÉªÂ∏∞ÂÆÖ",
                "background": "home_living",
                "bgm": "daily",
                "cuts": [
                    {"id": "s03_01", "speaker": "kazuo", "text": "„ÇÑ„Å£„Å®ÂÆ∂„Å´Â∏∞„Å£„Å¶„Åì„Çâ„Çå„Åü„ÄÇ„ÇÑ„Å£„Å±„ÇäËá™ÂàÜ„ÅÆÂÆ∂„Åå‰∏ÄÁï™ËêΩ„Å°ÁùÄ„Åè„Å™„ÄÇ", "characters": ["kazuo", "ichiko"]},
                    {"id": "s03_02", "speaker": "ichiko", "text": "„ÅäÁà∂„Åï„Çì„ÄÅ„Åä„Åã„Åà„Çä„Å™„Åï„ÅÑ„ÄÇÁÑ°ÁêÜ„Åó„Å™„ÅÑ„Åß„Å≠„ÄÇ„Éô„ÉÉ„Éâ„ÅÆÊ∫ñÂÇô„ÅØ„Åó„Å¶„ÅÇ„Çã„Åã„Çâ„ÄÇ", "characters": ["kazuo", "ichiko"]},
                    {"id": "s03_03", "speaker": "kazuo", "text": "„ÅÇ„Çä„Åå„Å®„ÅÜ„ÄÇÂÖ•Èô¢‰∏≠„ÅØÂ§ú„ÇÇÁú†„Çå„Å™„Åã„Å£„Åü„Åã„Çâ„ÄÅ‰ªäÊó•„ÅØ„ÇÜ„Å£„Åè„Çä‰ºë„ÇÅ„Åù„ÅÜ„Å†„ÄÇ", "characters": ["kazuo", "ichiko"]},
                    {"id": "s03_04", "speaker": "ichiko", "text": "ÈÖ∏Á¥†„ÅÆÊ©üÊ¢∞„ÇÇÊ•≠ËÄÖ„Åï„Çì„ÅåË®≠ÁΩÆ„Åó„Å¶„Åè„Çå„Åü„Çè„ÄÇ‰Ωø„ÅÑÊñπ„ÅØË¶ö„Åà„Å¶„ÇãÔºü", "characters": ["kazuo", "ichiko"]},
                    {"id": "s03_05", "speaker": "kazuo", "text": "„ÅÇ„ÅÇ„ÄÅ3Âπ¥„ÇÇ‰Ωø„Å£„Å¶„ÅÑ„Çã„Åã„ÇâÂ§ß‰∏àÂ§´„Å†„Çà„ÄÇÂÆâÈùôÊôÇ„ÅØ2„É™„ÉÉ„Éà„É´„ÄÅÂãï„Åè„Å®„Åç„ÅØ4„É™„ÉÉ„Éà„É´„Å´‰∏ä„Åí„Çå„Å∞„ÅÑ„ÅÑ„Çì„Å†„Çç„ÅÜÔºü", "characters": ["kazuo", "ichiko"]},
                    {"id": "s03_06", "speaker": "ichiko", "text": "ÊòéÊó•„Åã„ÇâË®™ÂïèÁúãË≠∑Â∏´„Åï„Çì„ÅåÊù•„Å¶„Åè„Çå„Çã„Å£„Å¶„ÄÇÈÄ±2Âõû„ÄÅÁÅ´Êõú„Å®Êú®Êõú„Å´Êù•„Å¶„Åè„Çå„Çã„Åù„ÅÜ„Çà„ÄÇ", "characters": ["kazuo", "ichiko"]}
                ],
                "knowledge": {
                    "title": "Âú®ÂÆÖÈÖ∏Á¥†ÁôÇÊ≥ïÔºàHOTÔºâ„Å®„ÅØ",
                    "text": "Home Oxygen Therapy„ÅÆÁï•„Åß„ÄÅËá™ÂÆÖ„ÅßÈÖ∏Á¥†Âê∏ÂÖ•„ÇíË°å„ÅÜÊ≤ªÁôÇÊ≥ï„Åß„Åô„ÄÇ\n\n„ÄêÊ©üÂô®„ÅÆÁ®ÆÈ°û„Äë\n„ÉªÈÖ∏Á¥†ÊøÉÁ∏ÆÂô®Ôºà‰∏ª„Å´Ëá™ÂÆÖÁî®Ôºâ\n„ÉªÊ∂≤‰ΩìÈÖ∏Á¥†\n„ÉªÊê∫Â∏ØÁî®„Éú„É≥„ÉôÔºàÂ§ñÂá∫Áî®Ôºâ\n\n„ÄêÈáçË¶Å„Å™Ê≥®ÊÑèÁÇπ„Äë\n„ÉªÁÅ´Ê∞óÂé≥Á¶ÅÔºà2m‰ª•ÂÜÖÔºâ\n„ÉªÈÖ∏Á¥†ÊµÅÈáè„ÅØÂåªÂ∏´„ÅÆÊåáÁ§∫„ÇíÂÆà„Çã\n„ÉªÊúà1Âõû„ÅÆÂ§ñÊù•ÂèóË®∫„ÅåÂøÖË¶Å"
                },
                "quiz": {
                    "question": "Âú®ÂÆÖÈÖ∏Á¥†ÁôÇÊ≥ï„Å´„Å§„ÅÑ„Å¶Ê≠£„Åó„ÅÑ„ÅÆ„ÅØ„Å©„Çå„ÅãÔºü",
                    "options": [
                        {"text": "ÈÖ∏Á¥†ÊµÅÈáè„ÅØËá™Â∑±Âà§Êñ≠„ÅßÂ§âÊõ¥„Åó„Å¶„Çà„ÅÑ", "correct": false},
                        {"text": "ÈÖ∏Á¥†Âê∏ÂÖ•‰∏≠„ÅÆÂñ´ÁÖô„ÅØÂïèÈ°å„Å™„ÅÑ", "correct": false},
                        {"text": "Êúà1Âõû‰ª•‰∏ä„ÅÆÂ§ñÊù•ÂèóË®∫„ÅåÂøÖË¶Å„Åß„ÅÇ„Çã", "correct": true},
                        {"text": "ÂÖ•Êµ¥‰∏≠„ÅØÈÖ∏Á¥†Âê∏ÂÖ•„Çí‰∏≠Ê≠¢„Åô„Çã", "correct": false}
                    ]
                }
            },
            {
                "id": 4,
                "title": "Ë®™ÂïèÁúãË≠∑ÔºàÂàùÂõûÔºâ",
                "background": "home_bedroom",
                "bgm": "heartwarming",
                "cuts": [
                    {"id": "s04_01", "speaker": "yamada", "text": "ËÅñÈö∑„Åï„Çì„ÄÅ„ÅØ„Åò„ÇÅ„Åæ„Åó„Å¶„ÄÇË®™ÂïèÁúãË≠∑„Çπ„ÉÜ„Éº„Ç∑„Éß„É≥„ÅÆÂ±±Áî∞„Åß„Åô„ÄÇ‰ªäÊó•„Åã„Çâ„Çà„Çç„Åó„Åè„ÅäÈ°ò„ÅÑ„Åó„Åæ„Åô„ÄÇ", "characters": ["kazuo", "yamada"]},
                    {"id": "s04_02", "speaker": "kazuo", "text": "„Çà„Çç„Åó„Åè„ÅäÈ°ò„ÅÑ„Åó„Åæ„Åô„ÄÇ„Åì„ÅÜ„Åó„Å¶ÂÆ∂„Å´Êù•„Å¶„ÇÇ„Çâ„Åà„Çã„Å®Âä©„Åã„Çä„Åæ„Åô„ÄÇ", "characters": ["kazuo", "yamada"]},
                    {"id": "s04_03", "speaker": "yamada", "text": "„Åæ„Åö„ÄÅ„Åä‰Ωì„ÅÆÁä∂ÊÖã„ÇíÁ¢∫Ë™ç„Åï„Åõ„Å¶„Åè„Å†„Åï„ÅÑ„Å≠„ÄÇË°ÄÂúß„Å®ËÑàÊãç„ÄÅÈÖ∏Á¥†È£ΩÂíåÂ∫¶„ÇíÊ∏¨„Çä„Åæ„Åô„Å≠„ÄÇ", "characters": ["kazuo", "yamada"]},
                    {"id": "s04_04", "speaker": "yamada", "text": "Ë°ÄÂúß120„ÅÆ75„ÄÅËÑàÊãç78Âõû„ÄÅSpO2„ÅØ96%„Åß„Åô„Å≠„ÄÇÈÖ∏Á¥†2„É™„ÉÉ„Éà„É´„ÅßÂÆâÂÆö„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ", "characters": ["kazuo", "yamada"]},
                    {"id": "s04_05", "speaker": "yamada", "text": "ËÉ∏„ÅÆÈü≥„ÇíËÅ¥„Åã„Åõ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇÂ∞ë„Åó„Éí„É•„Éº„Éí„É•„Éº„Å®„ÅÑ„ÅÜÈü≥„Åå„Åó„Åæ„Åô„Å≠„ÄÇÁó∞„ÅØÂá∫„Åæ„Åô„ÅãÔºü", "characters": ["kazuo", "yamada"]},
                    {"id": "s04_06", "speaker": "kazuo", "text": "„Åà„Åà„ÄÅÁôΩ„Å£„ÅΩ„ÅÑÁó∞„ÅåÂá∫„Çã„Åì„Å®„ÅØ„ÅÇ„Çä„Åæ„Åô„Åå„ÄÅËá™ÂàÜ„ÅßÂá∫„Åõ„Å¶„ÅÑ„Åæ„Åô„ÄÇ", "characters": ["kazuo", "yamada"]},
                    {"id": "s04_07", "speaker": "yamada", "text": "„Åù„Çå„ÅØËâØ„Åã„Å£„Åü„Åß„Åô„ÄÇÁó∞„ÅÆËâ≤„ÅåÈªÑËâ≤„ÇÑÁ∑ëËâ≤„Å´Â§â„Çè„Å£„Åü„Çä„ÄÅÁÜ±„ÅåÂá∫„Åü„Çä„Åó„Åü„Çâ„ÄÅ„Åô„Åê„Å´ÈÄ£Áµ°„Åó„Å¶„Åè„Å†„Åï„ÅÑ„Å≠„ÄÇÊÑüÊüì„ÅÆÂÖÜÂÄô„Åã„ÇÇ„Åó„Çå„Åæ„Åõ„Çì„Åã„Çâ„ÄÇ", "characters": ["kazuo", "yamada"]}
                ],
                "knowledge": {
                    "title": "COPD„ÅÆÂëºÂê∏Èü≥„Å®Ë¶≥ÂØü„Éù„Ç§„É≥„Éà",
                    "text": "„ÄêËÅ¥Ë®∫„ÅßËÅû„Åì„Åà„ÇãÈü≥„Äë\n„ÉªÁ¨õÂ£∞Èü≥ÔºàwheezeÔºâÔºö„Éí„É•„Éº„Éí„É•„Éº„ÄÇÊ∞óÈÅìÁã≠Á™Ñ\n„ÉªÈ°ûÈºæÈü≥ÔºàrhonchiÔºâÔºö„Ç∞„Éº„Ç∞„Éº„ÄÇÁó∞„ÅÆË≤ØÁïô\n\n„ÄêÊÄ•ÊÄßÂ¢óÊÇ™„ÅÆÂæ¥ÂÄô„Äë\n„ÉªÁó∞„ÅÆÈáè„ÅÆÂ¢óÂä†„ÄÅËâ≤„ÅÆÂ§âÂåñÔºàËÜøÊÄßÔºâ\n„ÉªÂëºÂê∏Âõ∞Èõ£„ÅÆÊÇ™Âåñ\n„ÉªÁô∫ÁÜ±\n„ÉªÂÖ®Ë∫´ÂÄ¶ÊÄ†ÊÑü„ÅÆÂ¢óÂº∑"
                },
                "quiz": {
                    "question": "COPDÊÇ£ËÄÖ„ÅÆÈÖ∏Á¥†ÁôÇÊ≥ï„ÅßÊ≠£„Åó„ÅÑ„ÅÆ„ÅØ„Å©„Çå„ÅãÔºü",
                    "options": [
                        {"text": "È´òÊøÉÂ∫¶ÈÖ∏Á¥†„ÇíÊäï‰∏é„Åô„Çã", "correct": false},
                        {"text": "CO2„Éä„É´„Ç≥„Éº„Ç∑„Çπ„Å´Ê≥®ÊÑè„Åô„Çã", "correct": true},
                        {"text": "SpO2 100%„ÇíÁõÆÊ®ô„Å®„Åô„Çã", "correct": false},
                        {"text": "ÈÖ∏Á¥†ÊµÅÈáè„ÅØÊÇ£ËÄÖ„ÅÆÂà§Êñ≠„ÅßË™øÊï¥„Åô„Çã", "correct": false}
                    ]
                }
            },
            {
                "id": 5,
                "title": "ÂÖ•Êµ¥‰ªãÂä©",
                "background": "home_bedroom",
                "bgm": "heartwarming",
                "cuts": [
                    {"id": "s05_01", "speaker": "yamada", "text": "ËÅñÈö∑„Åï„Çì„ÄÅ‰ªäÊó•„ÅØ„ÅäÈ¢®ÂëÇ„Å´ÂÖ•„Çä„Åæ„Åó„Çá„ÅÜ„Åã„ÄÇÂ••Êßò„ÅåÊ∫ñÂÇô„Åó„Å¶„Åè„Å†„Åï„Å£„Å¶„ÅÑ„Åæ„Åô„Å≠„ÄÇ", "characters": ["kazuo", "yamada", "ichiko"]},
                    {"id": "s05_02", "speaker": "ichiko", "text": "„Çø„Ç™„É´„Å®ÁùÄÊõø„Åà„ÅØÁî®ÊÑè„Åó„Å¶„ÅÇ„Çä„Åæ„Åô„ÄÇ„ÅäÈ¢®ÂëÇ„ÅÆÊ∏©Â∫¶„ÅØ39Â∫¶„Å´„Åó„Å¶„ÅÇ„Çã„Çè„ÄÇ", "characters": ["kazuo", "yamada", "ichiko"]},
                    {"id": "s05_03", "speaker": "yamada", "text": "„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô„ÄÇËÅñÈö∑„Åï„Çì„ÄÅÂÖ•Êµ¥Ââç„Å´ÈÖ∏Á¥†„Çí4„É™„ÉÉ„Éà„É´„Å´‰∏ä„Åí„Å¶„Åä„Åç„Åæ„Åó„Çá„ÅÜ„Å≠„ÄÇ", "characters": ["kazuo", "yamada"]},
                    {"id": "s05_04", "speaker": "kazuo", "text": "ÂÖ•Êµ¥„ÅØ‰ΩìÂäõ‰Ωø„ÅÜ„Åã„Çâ„Å≠„ÄÇËã¶„Åó„Åè„Å™„Çâ„Å™„ÅÑ„ÅãÂ∞ë„ÅóÂøÉÈÖç„Å†„Å™„ÄÇ", "characters": ["kazuo", "yamada"]},
                    {"id": "s05_05", "speaker": "yamada", "text": "„ÇÜ„Å£„Åè„ÇäÂÖ•„Çä„Åæ„Åó„Çá„ÅÜ„ÄÇÊ¥óÈ´™„ÇÑ‰Ωì„ÇíÊ¥ó„ÅÜ„ÅÆ„ÅØÁßÅ„Åå„ÅäÊâã‰ºù„ÅÑ„Åó„Åæ„Åô„Å≠„ÄÇËÖï„Çí‰∏ä„Åí„ÇãÂãï‰Ωú„ÅØÊÅØ„ÇíÂêê„Åç„Å™„Åå„ÇâË°å„ÅÑ„Åæ„Åó„Çá„ÅÜ„ÄÇ", "characters": ["kazuo", "yamada"]},
                    {"id": "s05_06", "speaker": "kazuo", "text": "‰πÖ„Åó„Å∂„Çä„ÅÆ„ÅäÈ¢®ÂëÇ„Å†„ÄÇ„ÇÑ„Å£„Å±„ÇäÊ∞óÊåÅ„Å°„ÅÑ„ÅÑ„Å™„ÄÇ‰∏Ä‰∫∫„Å†„Å®„Å™„Åã„Å™„ÅãÂÖ•„Çå„Å™„ÅÑ„Åã„Çâ„ÄÅÂä©„Åã„Çã„Å™„ÅÇ„ÄÇ", "characters": ["kazuo", "yamada"]},
                    {"id": "s05_07", "speaker": "yamada", "text": "„ÅäÊπØ„Å´Êµ∏„Åã„Çã„ÅÆ„ÅØ5ÂàÜÁ®ãÂ∫¶„Å´„Åó„Å¶„Åä„Åç„Åæ„Åó„Çá„ÅÜ„ÄÇÈï∑ÊπØ„ÅØÂøÉËáì„Å´Ë≤†ÊãÖ„Åå„Åã„Åã„Çä„Åæ„Åô„Åã„Çâ„Å≠„ÄÇ", "characters": ["kazuo", "yamada"]}
                ],
                "knowledge": {
                    "title": "COPDÊÇ£ËÄÖ„ÅÆÂÖ•Êµ¥‰ªãÂä©„ÅÆ„Éù„Ç§„É≥„Éà",
                    "text": "„ÄêÂÖ•Êµ¥‰ªãÂä©„ÅÆ6„Å§„ÅÆ„Éù„Ç§„É≥„Éà„Äë\n‚ë†ÂÖ•Êµ¥ÂâçÂæå„ÅßÈÖ∏Á¥†ÊµÅÈáè„Çí‰∏ä„Åí„Çã\n‚ë°ÊπØÊ∏©„ÅØ38-40Â∫¶„ÅÆ„Å¨„Çã„ÇÅ„Å´\n‚ë¢Èï∑ÊπØ„ÇíÈÅø„Åë„ÇãÔºà5-10ÂàÜÁ®ãÂ∫¶Ôºâ\n‚ë£Ê¥óÈ´™ÊôÇ„ÅØÂâç„Åã„Åå„Åø„ÇíÈÅø„Åë„Çã\n‚ë§ËÑ±Ë°£ÊâÄ„Å®Êµ¥ÂÆ§„ÅÆÊ∏©Â∫¶Â∑Æ„Å´Ê≥®ÊÑè\n‚ë•ÂÖ•Êµ¥Âæå„ÅØÂçÅÂàÜ„Å™‰ºëÊÅØ„ÇíÂèñ„Çã"
                },
                "quiz": {
                    "question": "COPDÊÇ£ËÄÖ„ÅÆÂÖ•Êµ¥‰ªãÂä©„ÅßÊ≠£„Åó„ÅÑ„ÅÆ„ÅØ„Å©„Çå„ÅãÔºü",
                    "options": [
                        {"text": "42Â∫¶‰ª•‰∏ä„ÅÆÁÜ±„ÅÑÊπØ„Å´ÂÖ•„Çå„Çã", "correct": false},
                        {"text": "ÂÖ•Êµ¥‰∏≠„ÅØÈÖ∏Á¥†Âê∏ÂÖ•„Çí‰∏≠Ê≠¢„Åô„Çã", "correct": false},
                        {"text": "Ê¥óÈ´™ÊôÇ„ÅØÈï∑ÊôÇÈñìÂâç„Åã„Åå„Åø„ÅÆÂßøÂã¢„Çí„Å®„Çâ„Åõ„Çã", "correct": false},
                        {"text": "Âä¥‰ΩúÊôÇ„ÅØÈÖ∏Á¥†ÊµÅÈáè„ÇíÂ¢ó„ÇÑ„Åô", "correct": true}
                    ]
                }
            },
            {
                "id": 6,
                "title": "ÂëºÂê∏„É™„Éè„Éì„É™",
                "background": "home_bedroom",
                "bgm": "heartwarming",
                "cuts": [
                    {"id": "s06_01", "speaker": "yamada", "text": "ËÅñÈö∑„Åï„Çì„ÄÅ‰ªäÊó•„ÅØÂëºÂê∏„É™„Éè„Éì„É™„Çí„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ‰ΩìÂäõ„ÇíÁ∂≠ÊåÅ„Åô„Çã„Åü„ÇÅ„Å´„Å®„Å¶„ÇÇÂ§ßÂàá„Å™„Çì„Åß„Åô„Çà„ÄÇ", "characters": ["kazuo", "yamada"]},
                    {"id": "s06_02", "speaker": "kazuo", "text": "„É™„Éè„Éì„É™„Åã„ÄÇÊ≠£Áõ¥„ÄÅËã¶„Åó„Åè„Å™„Çã„ÅÆ„ÅåÊÄñ„Åè„Å¶„ÅÇ„Åæ„Çä„ÇÑ„Å£„Å¶„ÅÑ„Å™„ÅÑ„Çì„Å†„ÄÇ", "characters": ["kazuo", "yamada"]},
                    {"id": "s06_03", "speaker": "yamada", "text": "„Åù„ÅÜ„Åß„Åô„Çà„Å≠„ÄÇ„Åß„ÇÇ„ÄÅÂãï„Åã„Å™„ÅÑ„Åß„ÅÑ„Çã„Å®Á≠ãÂäõ„ÅåËêΩ„Å°„Å¶„ÄÅ„ÇÇ„Å£„Å®ÊÅØÂàá„Çå„Åó„ÇÑ„Åô„Åè„Å™„Å£„Å¶„Åó„Åæ„ÅÜ„Çì„Åß„Åô„ÄÇ", "characters": ["kazuo", "yamada"]},
                    {"id": "s06_04", "speaker": "yamada", "text": "„Åæ„Åö„ÄÅÂè£„Åô„Åº„ÇÅÂëºÂê∏„ÇíÁ∑¥Áøí„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇÈºª„Åã„ÇâÂê∏„Å£„Å¶„ÄÅÂè£„Çí„Åô„Åº„ÇÅ„Å¶„ÇÜ„Å£„Åè„ÇäÂêê„Åç„Åæ„Åô„ÄÇÂêê„ÅèÊôÇÈñì„ÇíÂê∏„ÅÜÊôÇÈñì„ÅÆ2ÂÄç„Åè„Çâ„ÅÑ„Å´„Åô„Çã„ÅÆ„Åå„Ç≥„ÉÑ„Åß„Åô„ÄÇ", "characters": ["kazuo", "yamada"]},
                    {"id": "s06_05", "speaker": "kazuo", "text": "„Åì„ÅÜ„Åß„Åô„ÅãÔºü„Éï„Éº„ÉÉ„ÄÇ", "characters": ["kazuo", "yamada"]},
                    {"id": "s06_06", "speaker": "yamada", "text": "‰∏äÊâã„Åß„ÅôÔºÅ„Åì„ÅÆÂëºÂê∏Ê≥ï„ÅØ„ÄÅÊ∞óÈÅì„ÅåÁã≠„Åè„Å™„Çã„ÅÆ„ÇíÈò≤„ÅÑ„Åß„ÄÅÊÅØ„ÇíÂêê„Åç„ÇÑ„Åô„Åè„Åó„Å¶„Åè„Çå„Åæ„Åô„ÄÇËã¶„Åó„Åè„Å™„Å£„ÅüÊôÇ„Å´„ÇÇ‰Ωø„Åà„Åæ„Åô„Çà„ÄÇ", "characters": ["kazuo", "yamada"]},
                    {"id": "s06_07", "speaker": "kazuo", "text": "‰ΩìÂäõ„ÅåÊàª„Å£„Åü„Çâ„ÄÅÂÆ∂Êóè„Å®Â§ñÈ£ü„Å´Ë°å„Åç„Åü„ÅÑ„Å®ÊÄù„Å£„Å¶„Çã„Çì„Å†„ÄÇÊ∏©Ê≥âÊóÖË°å„ÇÇÂ§¢„Å†„Åë„Å©„Å≠„ÄÇ", "characters": ["kazuo", "yamada"]},
                    {"id": "s06_08", "speaker": "yamada", "text": "„Åù„Çå„ÅØÁ¥†Êïµ„Å™ÁõÆÊ®ô„Åß„Åô„Å≠ÔºÅÂ§ñÈ£ü„Å´Ë°å„Åë„Çã„Çà„ÅÜ„Å´„ÄÅ‰∏ÄÁ∑í„Å´È†ëÂºµ„Çä„Åæ„Åó„Çá„ÅÜ„ÄÇ", "characters": ["kazuo", "yamada"]}
                ],
                "knowledge": {
                    "title": "Âè£„Åô„Åº„ÇÅÂëºÂê∏„ÅÆÂäπÊûú",
                    "text": "„ÄêÂè£„Åô„Åº„ÇÅÂëºÂê∏„ÅÆ„É°„Ç´„Éã„Ç∫„É†„Äë\n‚ë†ÂëºÊ∞óÊôÇ„ÅÆÊ∞óÈÅìÂÜÖÂúß„ÇíÈ´ò„ÇÅ„ÄÅÊ∞óÈÅì„ÅÆËôöËÑ±„ÇíÈò≤„Åê\n‚ë°ÂëºÊ∞óÊôÇÈñì„ÇíÂª∂Èï∑„Åó„ÄÅËÇ∫ÂÜÖ„ÅÆÁ©∫Ê∞ó„ÇíÂäπÁéá„Çà„ÅèÊéíÂá∫\n‚ë¢ÂëºÂê∏Êï∞„ÇíÊ∏õ„Çâ„Åó„ÄÅÂëºÂê∏‰ªï‰∫ãÈáè„ÇíËªΩÊ∏õ\n‚ë£Êó•Â∏∏ÁîüÊ¥ªÂãï‰Ωú‰∏≠„ÅÆÊÅØÂàá„Çå„ÇíËªΩÊ∏õ"
                },
                "quiz": {
                    "question": "COPDÊÇ£ËÄÖ„ÅÆÂëºÂê∏Âõ∞Èõ£ÊôÇ„Å´ÊúâÂäπ„Å™ÂëºÂê∏Ê≥ï„ÅØ„Å©„Çå„ÅãÔºü",
                    "options": [
                        {"text": "ËÉ∏ÂºèÂëºÂê∏", "correct": false},
                        {"text": "Âè£„Åô„Åº„ÇÅÂëºÂê∏", "correct": true},
                        {"text": "Âä™ÂäõÂëºÂê∏", "correct": false},
                        {"text": "ÈÅéÊèõÊ∞ó", "correct": false}
                    ]
                }
            },
            {
                "id": 7,
                "title": "Ëñ¨Â±Ä",
                "background": "pharmacy",
                "bgm": "heartwarming",
                "cuts": [
                    {"id": "s07_01", "speaker": "kazuo", "text": "Âá¶ÊñπÁÆã„ÇíÊåÅ„Å£„Å¶„Åç„Åæ„Åó„Åü„ÄÇ", "characters": ["kazuo", "pharmacist"]},
                    {"id": "s07_02", "speaker": "pharmacist", "text": "ËÅñÈö∑„Åï„Çì„ÄÅ„Åì„Çì„Å´„Å°„ÅØ„ÄÇ‰ªäÂõû„ÅÆ„ÅäËñ¨„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åô„Å≠„ÄÇÂê∏ÂÖ•Ëñ¨„ÅÆ„Çπ„Éî„É™„Éº„Éê„ÅØ„ÄÅÊØéÊó•Âêå„ÅòÊôÇÈñì„Å´‰Ωø„Å£„Å¶„ÅÑ„Åæ„Åô„ÅãÔºü", "characters": ["kazuo", "pharmacist"]},
                    {"id": "s07_03", "speaker": "kazuo", "text": "Êúù„Å®Â§ú„Å´‰Ωø„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇÂøò„Çå„Åü„Åì„Å®„ÅØ„Å™„ÅÑ„Åß„Åô„Çà„ÄÇ", "characters": ["kazuo", "pharmacist"]},
                    {"id": "s07_04", "speaker": "pharmacist", "text": "Á¥†Êô¥„Çâ„Åó„ÅÑ„Åß„Åô„Å≠„ÄÇÂê∏ÂÖ•Âæå„ÅØ„ÅÜ„Åå„ÅÑ„ÇíÂøò„Çå„Åö„Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑ„Å≠„ÄÇÂè£ËÖî„Ç´„É≥„Ç∏„ÉÄ„ÅÆ‰∫àÈò≤„Å´„Å™„Çä„Åæ„Åô„ÄÇ", "characters": ["kazuo", "pharmacist"]},
                    {"id": "s07_05", "speaker": "pharmacist", "text": "„Éó„É¨„Éâ„Éã„Çæ„É≠„É≥„ÅØÁÇéÁóá„ÇíÊäë„Åà„Çã„ÅäËñ¨„Åß„Åô„Åå„ÄÅÈï∑Êúü‰ΩøÁî®„ÅßÈ™®Á≤óÈ¨ÜÁóá„ÅÆ„É™„Çπ„ÇØ„Åå„ÅÇ„Çä„Åæ„Åô„ÅÆ„Åß„ÄÅ„Ç´„É´„Ç∑„Ç¶„É†„ÇíÊÑèË≠ò„Åó„Å¶ÊëÇ„Å£„Å¶„Åè„Å†„Åï„ÅÑ„Å≠„ÄÇ", "characters": ["kazuo", "pharmacist"]},
                    {"id": "s07_06", "speaker": "kazuo", "text": "„Çè„Åã„Çä„Åæ„Åó„Åü„ÄÇÁâõ‰π≥„ÇíÈ£≤„ÇÄ„Çà„ÅÜ„Å´„Åó„Åæ„Åô„ÄÇ", "characters": ["kazuo", "pharmacist"]}
                ],
                "knowledge": {
                    "title": "COPDÊ≤ªÁôÇËñ¨„ÅÆÁ®ÆÈ°û",
                    "text": "„ÄêÊ∞óÁÆ°ÊîØÊã°ÂºµËñ¨„Äë\n„ÉªLAMAÔºàÈï∑ÊôÇÈñì‰ΩúÁî®ÊÄßÊäó„Ç≥„É™„É≥Ëñ¨Ôºâ\n„ÉªLABAÔºàÈï∑ÊôÇÈñì‰ΩúÁî®ÊÄßŒ≤2Âà∫ÊøÄËñ¨Ôºâ\n„ÉªSABAÔºàÁü≠ÊôÇÈñì‰ΩúÁî®ÊÄßŒ≤2Âà∫ÊøÄËñ¨Ôºâ\n\n„ÄêÊäóÁÇéÁóáËñ¨„Äë\n„ÉªICSÔºàÂê∏ÂÖ•„Çπ„ÉÜ„É≠„Ç§„ÉâÔºâ\n„ÉªÁµåÂè£„Çπ„ÉÜ„É≠„Ç§„Éâ"
                },
                "quiz": {
                    "question": "Âê∏ÂÖ•„Çπ„ÉÜ„É≠„Ç§„ÉâËñ¨‰ΩøÁî®Âæå„Å´„ÅÜ„Åå„ÅÑ„Çí„Åô„ÇãÁõÆÁöÑ„ÅØ„Å©„Çå„ÅãÔºü",
                    "options": [
                        {"text": "Âë≥Ë¶öÈöúÂÆ≥„ÅÆ‰∫àÈò≤", "correct": false},
                        {"text": "Âè£ËÖî„Ç´„É≥„Ç∏„ÉÄÁóá„ÅÆ‰∫àÈò≤", "correct": true},
                        {"text": "Ê≠ØÂë®ÁóÖ„ÅÆ‰∫àÈò≤", "correct": false},
                        {"text": "Âè£Ëá≠„ÅÆ‰∫àÈò≤", "correct": false}
                    ]
                }
            },
            {
                "id": 8,
                "title": "„Åã„Åã„Çä„Å§„ÅëÂåªÂèóË®∫",
                "background": "clinic",
                "bgm": "medical",
                "cuts": [
                    {"id": "s08_01", "speaker": "doctor", "text": "ËÅñÈö∑„Åï„Çì„ÄÅÈÄÄÈô¢Âæå1„É∂Êúà„Åß„Åô„Å≠„ÄÇË™øÂ≠ê„ÅØ„ÅÑ„Åã„Åå„Åß„Åô„ÅãÔºü", "characters": ["kazuo", "doctor"]},
                    {"id": "s08_02", "speaker": "kazuo", "text": "„Åä„Åã„Åí„Åï„Åæ„Åß„ÄÅÂ§ß„Åç„ÅèÊÇ™„Åè„Å™„Çã„Åì„Å®„ÅØ„Å™„ÅèÈÅé„Åî„Åõ„Å¶„ÅÑ„Åæ„Åô„ÄÇ", "characters": ["kazuo", "doctor"]},
                    {"id": "s08_03", "speaker": "doctor", "text": "Ë®™ÂïèÁúãË≠∑„ÅÆË®òÈå≤„ÇíË¶ã„Çã„Å®„ÄÅSpO2„ÇÇÂÆâÂÆö„Åó„Å¶„ÅÑ„Åæ„Åô„Å≠„ÄÇ‰ΩìÈáç„ÅåÂ∞ë„ÅóÊ∏õ„Å£„Å¶„ÅÑ„Çã„ÅÆ„ÅåÊ∞ó„Å´„Å™„Çä„Åæ„Åô„Åå„ÄÇ", "characters": ["kazuo", "doctor"]},
                    {"id": "s08_04", "speaker": "kazuo", "text": "È£üÊ¨≤„ÅØ„ÅÇ„Çã„Çì„Åß„Åô„Åå„ÄÅ„ÅÇ„Åæ„ÇäÈáè„ÅåÈ£ü„Åπ„Çâ„Çå„Å™„Åè„Å¶„ÄÇ", "characters": ["kazuo", "doctor"]},
                    {"id": "s08_05", "speaker": "doctor", "text": "COPD„ÅÆÊñπ„ÅØÂëºÂê∏„Å´„Ç®„Éç„É´„ÇÆ„Éº„Çí‰Ωø„ÅÜ„ÅÆ„Åß„ÄÅ‰ΩìÈáç„ÅåÊ∏õ„Çä„ÇÑ„Åô„ÅÑ„Çì„Åß„Åô„ÄÇÂ∞ëÈáè„Åß„ÇÇÈ´ò„Ç´„É≠„É™„Éº„Å™„ÇÇ„ÅÆ„ÇíÊëÇ„Çã„Çà„ÅÜ„Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ", "characters": ["kazuo", "doctor"]},
                    {"id": "s08_06", "speaker": "doctor", "text": "ÊÑüÊüì‰∫àÈò≤„ÇÇÂ§ßÂàá„Åß„Åô„ÄÇ‰∫∫Ê∑∑„Åø„ÅØÈÅø„Åë„Å¶„ÄÅÊâãÊ¥ó„ÅÑ„ÅÜ„Åå„ÅÑ„ÇíÂæπÂ∫ï„Åó„Å¶„Åè„Å†„Åï„ÅÑ„Å≠„ÄÇ„Ç§„É≥„Éï„É´„Ç®„É≥„Ç∂„Å®ËÇ∫ÁÇéÁêÉËèå„ÅÆ„ÉØ„ÇØ„ÉÅ„É≥„ÅØÊé•Á®Æ„Åó„Å¶„ÅÑ„Åæ„Åô„ÅãÔºü", "characters": ["kazuo", "doctor"]},
                    {"id": "s08_07", "speaker": "kazuo", "text": "„Ç§„É≥„Éï„É´„Ç®„É≥„Ç∂„ÅØÊØéÂπ¥Êâì„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇËÇ∫ÁÇéÁêÉËèå„ÅØ5Âπ¥Ââç„Å´Êâì„Å°„Åæ„Åó„Åü„ÄÇ", "characters": ["kazuo", "doctor"]},
                    {"id": "s08_08", "speaker": "doctor", "text": "„Åß„ÅØÊ¨°Âõû„ÄÅËÇ∫ÁÇéÁêÉËèå„ÉØ„ÇØ„ÉÅ„É≥„ÅÆÂÜçÊé•Á®Æ„ÇÇÊ§úË®é„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ", "characters": ["kazuo", "doctor"]}
                ],
                "knowledge": {
                    "title": "COPDÊÇ£ËÄÖ„ÅÆÊ†ÑÈ§äÁÆ°ÁêÜ",
                    "text": "„Äê„Å™„Åú‰ΩìÈáç„ÅåÊ∏õ„Çã„ÅÆ„Åã„Äë\nCOPDÊÇ£ËÄÖ„ÅØÂëºÂê∏Á≠ã„ÅÆ‰ªï‰∫ãÈáèÂ¢óÂä†„Å´„Çà„Çä„ÄÅÂÆâÈùôÊôÇ„Åß„ÇÇÂÅ•Â∏∏ËÄÖ„ÅÆ1.2-1.5ÂÄç„ÅÆ„Ç®„Éç„É´„ÇÆ„Éº„ÇíÊ∂àË≤ª„Åó„Åæ„Åô„ÄÇ\n\n„ÄêÊ†ÑÈ§äÊåáÂ∞é„ÅÆ„Éù„Ç§„É≥„Éà„Äë\n„ÉªÈ´ò„Ç´„É≠„É™„Éº„ÉªÈ´ò„Çø„É≥„Éë„ÇØÈ£ü\n„ÉªÂ∞ëÈáèÈ†ªÂõûÈ£üÔºà1Êó•5-6ÂõûÔºâ\n„ÉªÁÇ≠Ê∞¥ÂåñÁâ©ÈÅéÂâ∞ÊëÇÂèñ„ÅØÈÅø„Åë„Çã"
                },
                "quiz": {
                    "question": "COPDÊÇ£ËÄÖ„ÅÆÊ†ÑÈ§äÊåáÂ∞é„Å®„Åó„Å¶ÈÅ©Âàá„Å™„ÅÆ„ÅØ„Å©„Çå„ÅãÔºü",
                    "options": [
                        {"text": "‰Ωé„Ç´„É≠„É™„ÉºÈ£ü„ÇíÂãß„ÇÅ„Çã", "correct": false},
                        {"text": "Ê∞¥ÂàÜÂà∂Èôê„ÇíÊåáÂ∞é„Åô„Çã", "correct": false},
                        {"text": "È´ò„Çø„É≥„Éë„ÇØÈ£ü„ÇíÂãß„ÇÅ„Çã", "correct": true},
                        {"text": "ÁÇ≠Ê∞¥ÂåñÁâ©‰∏≠ÂøÉ„ÅÆÈ£ü‰∫ã„ÇíÂãß„ÇÅ„Çã", "correct": false}
                    ]
                }
            },
            {
                "id": 9,
                "title": "„Ç±„Ç¢„Éû„ÉçË®™Âïè",
                "background": "home_living",
                "bgm": "heartwarming",
                "cuts": [
                    {"id": "s09_01", "speaker": "sato", "text": "ËÅñÈö∑„Åï„Çì„ÄÅÂ••Êßò„ÄÅ„Åì„Çì„Å´„Å°„ÅØ„ÄÇ„Ç±„Ç¢„Éû„Éç„Ç∏„É£„Éº„ÅÆ‰ΩêËó§„Åß„Åô„ÄÇ„Çµ„Éº„Éì„Çπ„ÅÆÂà©Áî®Áä∂Ê≥Å„ÇíÁ¢∫Ë™ç„Åï„Åõ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ", "characters": ["kazuo", "ichiko", "sato"]},
                    {"id": "s09_02", "speaker": "ichiko", "text": "Ë®™ÂïèÁúãË≠∑„ÅÆ„Åä„Åã„Åí„Åß„ÄÅÁßÅ„ÇÇÂ∞ë„ÅóÊ•Ω„Å´„Å™„Çä„Åæ„Åó„Åü„ÄÇ", "characters": ["kazuo", "ichiko", "sato"]},
                    {"id": "s09_03", "speaker": "sato", "text": "„Åù„Çå„ÅØËâØ„Åã„Å£„Åü„Åß„Åô„ÄÇ‰ªãË≠∑„Åô„ÇãÂ••Êßò„ÅÆÂÅ•Â∫∑„ÇÇÂ§ßÂàá„Åß„Åô„Åã„Çâ„Å≠„ÄÇ", "characters": ["kazuo", "ichiko", "sato"]},
                    {"id": "s09_04", "speaker": "sato", "text": "Ë®™ÂïèÂÖ•Êµ¥„ÇÑ„ÄÅ„É¨„Çπ„Éë„Ç§„ÉàÂÖ•Èô¢„Å®„ÅÑ„Å£„Åü„Çµ„Éº„Éì„Çπ„ÇÇ„ÅÇ„Çä„Åæ„Åô„ÄÇÂøÖË¶Å„Å™„Å®„Åç„ÅØÈÅ†ÊÖÆ„Å™„ÅèÁõ∏Ë´á„Åó„Å¶„Åè„Å†„Åï„ÅÑ„Å≠„ÄÇ", "characters": ["kazuo", "ichiko", "sato"]},
                    {"id": "s09_05", "speaker": "kazuo", "text": "„Åù„ÅÜ„ÅÑ„ÅÜ„Çµ„Éº„Éì„Çπ„Åå„ÅÇ„Çã„ÅÆ„ÅØÂøÉÂº∑„ÅÑ„Åß„Åô„ÄÇ", "characters": ["kazuo", "ichiko", "sato"]},
                    {"id": "s09_06", "speaker": "sato", "text": "Á∑äÊÄ•ÊôÇ„ÅÆÈÄ£Áµ°ÂÖà„ÅØ„ÅäÊ∏°„Åó„Åó„Åæ„Åó„Åü„Å≠„ÄÇ24ÊôÇÈñìÂØæÂøú„ÅÆË®™ÂïèÁúãË≠∑„Çπ„ÉÜ„Éº„Ç∑„Éß„É≥„ÅÆÁï™Âè∑„Åß„Åô„ÄÇ", "characters": ["kazuo", "ichiko", "sato"]},
                    {"id": "s09_07", "speaker": "sato", "text": "‰ªãË≠∑ËÄÖ„ÅÆË≤†ÊãÖËªΩÊ∏õ„ÇÇÂ§ßÂàá„Åß„Åô„ÄÇ„ÅîÂÆ∂Êóè„Å†„Åë„ÅßÊä±„ÅàËæº„Åæ„Åö„ÄÅ‰Ωø„Åà„Çã„Çµ„Éº„Éì„Çπ„ÅØÊ¥ªÁî®„Åó„Å¶„Åè„Å†„Åï„ÅÑ„Å≠„ÄÇ", "characters": ["kazuo", "ichiko", "sato"]}
                ],
                "knowledge": {
                    "title": "Ë¶Å‰ªãË≠∑2„ÅßÂà©Áî®„Åß„Åç„Çã„Çµ„Éº„Éì„Çπ‰æã",
                    "text": "„ÄêÂ±ÖÂÆÖ„Çµ„Éº„Éì„Çπ„Äë\n„ÉªË®™Âïè‰ªãË≠∑Ôºà„Éõ„Éº„É†„Éò„É´„ÉóÔºâ\n„ÉªË®™ÂïèÁúãË≠∑\n„ÉªË®™Âïè„É™„Éè„Éì„É™„ÉÜ„Éº„Ç∑„Éß„É≥\n„ÉªÈÄöÊâÄ‰ªãË≠∑Ôºà„Éá„Ç§„Çµ„Éº„Éì„ÇπÔºâ\n„ÉªÁü≠ÊúüÂÖ•ÊâÄÔºà„Ç∑„Éß„Éº„Éà„Çπ„ÉÜ„Ç§Ôºâ\n\nÂå∫ÂàÜÊîØÁµ¶ÈôêÂ∫¶È°çÔºöÁ¥Ñ197,050ÂÜÜ/Êúà"
                },
                "quiz": {
                    "question": "‰ªãË≠∑‰øùÈô∫„ÅÆ‰øùÈô∫ËÄÖ„ÅØ„Å©„Çå„ÅãÔºü",
                    "options": [
                        {"text": "ÈÉΩÈÅìÂ∫úÁúå", "correct": false},
                        {"text": "Â∏ÇÁî∫Êùë", "correct": true},
                        {"text": "‰ªãË≠∑‰øùÈô∫ÂØ©Êüª‰ºö", "correct": false},
                        {"text": "Âú∞ÂüüÂåÖÊã¨ÊîØÊè¥„Çª„É≥„Çø„Éº", "correct": false}
                    ]
                }
            },
            {
                "id": 10,
                "title": "Â¶ª„Å®„ÅÆ‰ºöË©±",
                "background": "home_living",
                "bgm": "daily",
                "cuts": [
                    {"id": "s10_01", "speaker": "ichiko", "text": "„ÅäÁà∂„Åï„Çì„ÄÅÊúÄËøëÂ∞ë„ÅóÈ°îËâ≤„ÅåËâØ„Åè„Å™„Å£„Åü„Çì„Åò„ÇÉ„Å™„ÅÑÔºü", "characters": ["kazuo", "ichiko"]},
                    {"id": "s10_02", "speaker": "kazuo", "text": "„Åù„ÅÜ„ÅãÔºüÂ±±Áî∞„Åï„Çì„ÅåÊù•„Å¶„Åè„Çå„Çã„Çà„ÅÜ„Å´„Å™„Å£„Å¶„ÄÅ„ÅäÈ¢®ÂëÇ„Å´„ÇÇÂÖ•„Çå„Çã„Åó„ÄÅ„É™„Éè„Éì„É™„ÇÇ„Åß„Åç„Çã„Åã„Çâ„Åã„Å™„ÄÇ", "characters": ["kazuo", "ichiko"]},
                    {"id": "s10_03", "speaker": "ichiko", "text": "ÁßÅ„ÇÇÂÆâÂøÉ„Åß„Åç„Çã„Çè„ÄÇ‰∏Ä‰∫∫„ÅßË¶ã„Å¶„ÅÑ„ÅüÊôÇ„ÅØ„ÄÅÂ§ú‰∏≠„Å´‰Ωï„Åã„ÅÇ„Å£„Åü„Çâ„Å©„ÅÜ„Åó„Çà„ÅÜ„Å£„Å¶ÂøÉÈÖç„Åß„ÄÇ", "characters": ["kazuo", "ichiko"]},
                    {"id": "s10_04", "speaker": "kazuo", "text": "ÊØç„Åï„Çì„Å´„ÅØËã¶Âä¥„Çí„Åã„Åë„Çã„Å™„ÄÇ", "characters": ["kazuo", "ichiko"]},
                    {"id": "s10_05", "speaker": "ichiko", "text": "‰ΩïË®Ä„Å£„Å¶„Çã„ÅÆ„ÄÇ‰∏ÄÁ∑í„Å´„ÅÑ„Çâ„Çå„ÇãÊôÇÈñì„ÇíÂ§ßÂàá„Å´„Åó„Åæ„Åó„Çá„ÅÜ„Çà„ÄÇ", "characters": ["kazuo", "ichiko"]},
                    {"id": "s10_06", "speaker": "kazuo", "text": "„ÅÇ„ÅÇ„ÄÅ„Åù„ÅÜ„Å†„Å™„ÄÇÊù•Êúà„ÄÅÂ≠´„ÅåÈÅä„Å≥„Å´Êù•„Çã„Å£„Å¶Ë®Ä„Å£„Å¶„Åü„Å™„ÄÇ„Åù„ÅÆÊó•„ÇíÊ•Ω„Åó„Åø„Å´„Åó„Å¶„ÅÑ„Çã„Çà„ÄÇ", "characters": ["kazuo", "ichiko"]},
                    {"id": "s10_07", "speaker": "ichiko", "text": "ËøëÂ†¥„Åß„ÅÑ„ÅÑ„Åò„ÇÉ„Å™„ÅÑ„ÄÇÂ≠´„Åü„Å°„ÇÇÈÄ£„Çå„Å¶„ÄÅ„Åø„Çì„Å™„ÅßÁæéÂë≥„Åó„ÅÑ„ÇÇ„ÅÆÈ£ü„Åπ„Å´Ë°å„Åç„Åæ„Åó„Çá„ÅÜ„ÄÇ", "characters": ["kazuo", "ichiko"]},
                    {"id": "s10_08", "speaker": "kazuo", "text": "„Åù„ÅÜ„Å†„Å™„ÄÇ„Åù„Çå„ÇíÁõÆÊ®ô„Å´„ÄÅ„É™„Éè„Éì„É™„ÇÇÈ†ëÂºµ„Çã„Çà„ÄÇ", "characters": ["kazuo", "ichiko"]}
                ],
                "knowledge": {
                    "title": "‰ªãË≠∑ËÄÖ„Ç±„Ç¢„ÅÆÈáçË¶ÅÊÄß",
                    "text": "Âú®ÂÆÖÁôÇÈ§ä„Åß„ÅØ„ÄÅ‰ªãË≠∑ËÄÖ„Åß„ÅÇ„ÇãÂÆ∂Êóè„ÅÆÂøÉË∫´„ÅÆÂÅ•Â∫∑„ÇÇÈáçË¶Å„Åß„Åô„ÄÇ\n\n„Äê‰ªãË≠∑ËÄÖ„ÅÆ„Ç¢„Çª„Çπ„É°„É≥„ÉàÈ†ÖÁõÆ„Äë\n„ÉªË∫´‰ΩìÁöÑÂÅ•Â∫∑Áä∂ÊÖã\n„ÉªÁ≤æÁ•ûÁöÑÂÅ•Â∫∑Áä∂ÊÖã\n„Éª‰ªãË≠∑Ë≤†ÊãÖÊÑü\n„ÉªÁù°Áú†Áä∂Ê≥Å\n\n„ÄêÂÖ∑‰ΩìÁöÑ„Å™ÊîØÊè¥„Äë\n„ÉªÂÇæËÅ¥„ÄÅÂÖ±ÊÑüÁöÑÁêÜËß£\n„Éª„É¨„Çπ„Éë„Ç§„Éà„Ç±„Ç¢"
                }
            },
            {
                "id": 11,
                "title": "ÊÄ•Â§âÊôÇ„ÅÆÂØæÂøú",
                "background": "home_bedroom",
                "bgm": "medical",
                "cuts": [
                    {"id": "s11_01", "speaker": "ichiko", "text": "„ÅäÁà∂„Åï„Çì„ÄÅÂ§ß‰∏àÂ§´ÔºüÊÅØ„ÅåËçí„ÅÑ„Çè„Çà„ÄÇ", "characters": ["kazuo", "yamada", "ichiko"]},
                    {"id": "s11_02", "speaker": "kazuo", "text": "Êò®Êó•„Åã„ÇâÂ∞ë„ÅóË™øÂ≠ê„ÅåÊÇ™„Åè„Å¶„ÄÇÁó∞„ÅåÂá∫„Å´„Åè„ÅÑ„Çì„Å†„ÄÇ", "characters": ["kazuo", "yamada", "ichiko"]},
                    {"id": "s11_03", "speaker": "yamada", "text": "ËÅñÈö∑„Åï„Çì„ÄÅË®™ÂïèÁúãË≠∑„ÅÆÂ±±Áî∞„Åß„Åô„ÄÇÊúù„ÄÅÂ••Êßò„Åã„ÇâÈÄ£Áµ°„Çí„ÅÑ„Åü„Å†„ÅÑ„Å¶Êù•„Åæ„Åó„Åü„ÄÇ", "characters": ["kazuo", "yamada", "ichiko"]},
                    {"id": "s11_04", "speaker": "yamada", "text": "SpO2„ÅØ90%„ÄÅÂ∞ë„Åó‰∏ã„Åå„Å£„Å¶„ÅÑ„Åæ„Åô„Å≠„ÄÇÈÖ∏Á¥†„Çí4„É™„ÉÉ„Éà„É´„Å´‰∏ä„Åí„Åæ„Åó„Çá„ÅÜ„ÄÇÁÜ±„ÅØ„ÅÇ„Çä„Åæ„Åô„ÅãÔºü", "characters": ["kazuo", "yamada", "ichiko"]},
                    {"id": "s11_05", "speaker": "kazuo", "text": "37Â∫¶5ÂàÜ„Åè„Çâ„ÅÑ„ÅÇ„Çä„Åæ„Åô„ÄÇ", "characters": ["kazuo", "yamada", "ichiko"]},
                    {"id": "s11_06", "speaker": "yamada", "text": "Áó∞„ÅÆËâ≤„ÅØÈªÑËâ≤„Åè„Å™„Å£„Å¶„ÅÑ„Åæ„Åõ„Çì„ÅãÔºü", "characters": ["kazuo", "yamada", "ichiko"]},
                    {"id": "s11_07", "speaker": "kazuo", "text": "Ë®Ä„Çè„Çå„Å¶„Åø„Çå„Å∞„ÄÅÂ∞ë„ÅóÈªÑËâ≤„Å£„ÅΩ„ÅÑ„Åã„ÇÇ„ÄÇ", "characters": ["kazuo", "yamada", "ichiko"]},
                    {"id": "s11_08", "speaker": "yamada", "text": "ÊÑüÊüì„ÅÆÂÖÜÂÄô„Åã„ÇÇ„Åó„Çå„Åæ„Åõ„Çì„ÄÇ‰∏ªÊ≤ªÂåª„Å´ÈÄ£Áµ°„Åó„Å¶„ÄÅÊó©„ÇÅ„Å´ÂèóË®∫„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇÂ••Êßò„ÄÅ„Åã„Åã„Çä„Å§„ÅëÂåª„ÅÆË®∫ÂØüÂà∏„ÇíÁî®ÊÑè„Åó„Å¶„ÅÑ„Åü„Å†„Åë„Åæ„Åô„ÅãÔºü", "characters": ["kazuo", "yamada", "ichiko"]},
                    {"id": "s11_09", "speaker": "ichiko", "text": "„Çè„Åã„Çä„Åæ„Åó„Åü„ÄÇ„Åô„ÅêÁî®ÊÑè„Åó„Åæ„Åô„ÄÇ", "characters": ["kazuo", "yamada", "ichiko"]}
                ],
                "knowledge": {
                    "title": "COPDÊÄ•ÊÄßÂ¢óÊÇ™„ÅÆÂæ¥ÂÄô",
                    "text": "„Äê‰∏ªË¶ÅÁóáÁä∂„Äë\n„ÉªÂëºÂê∏Âõ∞Èõ£„ÅÆÊÇ™Âåñ\n„ÉªÁó∞„ÅÆÈáè„ÅÆÂ¢óÂä†„ÄÅËâ≤„ÅÆÂ§âÂåñÔºàËÜøÊÄßÔºâ\n„ÉªÁô∫ÁÜ±\n\n„Äê„Åù„ÅÆ‰ªñ„ÅÆÁóáÁä∂„Äë\n„ÉªÂÖ®Ë∫´ÂÄ¶ÊÄ†ÊÑü„ÅÆÂ¢óÂº∑\n„Éª„ÉÅ„Ç¢„Éé„Éº„ÇºÔºàÂîá„ÉªÁà™„ÅåÁ¥´Ëâ≤Ôºâ\n„ÉªÊÑèË≠ò„É¨„Éô„É´„ÅÆ‰Ωé‰∏ã"
                },
                "quiz": {
                    "question": "COPDÊÄ•ÊÄßÂ¢óÊÇ™„ÅÆÂæ¥ÂÄô„Å®„Åó„Å¶Ê≠£„Åó„ÅÑ„ÅÆ„ÅØ„Å©„Çå„ÅãÔºüÔºà2„Å§ÈÅ∏„ÅπÔºâ",
                    "options": [
                        {"text": "ËÜøÊÄßÁó∞„ÅÆÂ¢óÂä†", "correct": true},
                        {"text": "ÂëºÂê∏Âõ∞Èõ£„ÅÆËªΩÊ∏õ", "correct": false},
                        {"text": "È£üÊ¨≤„ÅÆÂ¢óÈÄ≤", "correct": false},
                        {"text": "Áô∫ÁÜ±", "correct": true}
                    ],
                    "multipleAnswer": true
                }
            },
            {
                "id": 12,
                "title": "ÂõûÂæ©Á¢∫Ë™çË®™Âïè",
                "background": "home_bedroom",
                "bgm": "heartwarming",
                "cuts": [
                    {"id": "s12_01", "speaker": "yamada", "text": "ËÅñÈö∑„Åï„Çì„ÄÅ„Åì„Çì„Å´„Å°„ÅØ„ÄÇÂÖàÈÄ±„ÅÆÂèóË®∫Âæå„ÄÅË™øÂ≠ê„ÅØ„ÅÑ„Åã„Åå„Åß„Åô„ÅãÔºü"},
                    {"id": "s12_02", "speaker": "kazuo", "text": "„Åä„Åã„Åí„Åï„Åæ„Åß„ÄÅ„Å†„ÅÑ„Å∂Ê•Ω„Å´„Å™„Çä„Åæ„Åó„Åü„ÄÇÊäóÁîüÂâ§„ÅåÂäπ„ÅÑ„Åü„Åø„Åü„ÅÑ„Åß„ÄÅÁó∞„ÇÇÂá∫„ÇÑ„Åô„Åè„Å™„Å£„Åü„Çà„ÄÇ"},
                    {"id": "s12_03", "speaker": "yamada", "text": "ËâØ„Åã„Å£„Åü„Åß„Åô„ÄÇSpO2„ÇíÊ∏¨„Çä„Åæ„Åô„Å≠„ÄÇ96%„ÄÅÈÖ∏Á¥†2„É™„ÉÉ„Éà„É´„ÅßÂÆâÂÆö„Åó„Å¶„ÅÑ„Åæ„Åô„Å≠„ÄÇ"},
                    {"id": "s12_04", "speaker": "ichiko", "text": "Â±±Áî∞„Åï„Çì„Åå„Åô„ÅêÊù•„Å¶„Åè„Çå„Å¶„ÄÅÊú¨ÂΩì„Å´Âä©„Åã„Çä„Åæ„Åó„Åü„ÄÇ‰∏Ä‰∫∫„Å†„Å£„Åü„Çâ„Å©„ÅÜ„Å™„Å£„Å¶„ÅÑ„Åü„Åã„ÄÇ"},
                    {"id": "s12_05", "speaker": "yamada", "text": "Â••Êßò„Åå„Åô„Åê„Å´ÈÄ£Áµ°„Åó„Å¶„Åè„Å†„Åï„Å£„Åü„Åä„Åã„Åí„Åß„Åô„ÄÇÊó©„ÇÅ„Å´ÂØæÂøú„Åß„Åç„Å¶„ÄÅÂÖ•Èô¢„Åõ„Åö„Å´Ê∏à„Åø„Åæ„Åó„Åü„Å≠„ÄÇ"},
                    {"id": "s12_06", "speaker": "kazuo", "text": "Êù•ÈÄ±„ÄÅÂ≠´„ÅåÊù•„Çã„Çì„Å†„ÄÇ„Åù„Çå„Åæ„Åß„Å´„ÇÇ„Å£„Å®ÂÖÉÊ∞ó„Å´„Å™„Å£„Å¶„Åä„Åç„Åü„ÅÑ„Å™„ÄÇ"},
                    {"id": "s12_07", "speaker": "yamada", "text": "„ÅÑ„ÅÑÁõÆÊ®ô„Åß„Åô„Å≠„ÄÇÁÑ°ÁêÜ„ÅÆ„Å™„ÅÑÁØÑÂõ≤„Åß„ÄÅ„É™„Éè„Éì„É™„ÇÇÁ∂ö„Åë„Å¶„ÅÑ„Åç„Åæ„Åó„Çá„ÅÜ„ÄÇ"}
                ],
                "knowledge": {
                    "title": "Êó©ÊúüÂØæÂøú„ÅÆÈáçË¶ÅÊÄß",
                    "text": "„ÄêCOPDÊÇ£ËÄÖ„ÅÆÊÄ•Â§âÊôÇÂØæÂøú„ÅÆ„Éù„Ç§„É≥„Éà„Äë\n„ÉªÁóáÁä∂„ÅÆÂ§âÂåñ„ÇíÊó©Êúü„Å´ÂØüÁü•\n„Éª24ÊôÇÈñìÂØæÂøú„ÅÆÈÄ£Áµ°‰ΩìÂà∂\n„ÉªÂÆ∂Êóè„Å∏„ÅÆÊïôËÇ≤„Å®ÈÄ£Êê∫\n„Éª„Åã„Åã„Çä„Å§„ÅëÂåª„Å®„ÅÆÊÉÖÂ†±ÂÖ±Êúâ"
                }
            },
            {
                "id": 13,
                "title": "„Ç®„É≥„Éá„Ç£„É≥„Ç∞",
                "background": null,
                "bgm": "main_theme",
                "cuts": [
                    {"id": "s13_01", "speaker": "narration", "text": "Êó©„ÇÅ„ÅÆÂØæÂøú„Åß„ÄÅ‰∏ÄÁî∑„Åï„Çì„ÅØÂÖ•Èô¢„Åõ„Åö„Å´Â§ñÊù•Ê≤ªÁôÇ„ÅßÂõûÂæ©„Åó„Åæ„Åó„Åü„ÄÇ"},
                    {"id": "s13_02", "speaker": "narration", "text": "Âú®ÂÆÖÁôÇÈ§ä„ÇíÊîØ„Åà„Çã„ÅÆ„ÅØ„ÄÅË®™ÂïèÁúãË≠∑Â∏´„Å†„Åë„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ"},
                    {"id": "s13_03", "speaker": "narration", "text": "‰∏ªÊ≤ªÂåª„ÄÅËñ¨Ââ§Â∏´„ÄÅ„Ç±„Ç¢„Éû„Éç„Ç∏„É£„Éº„ÄÅ„Åù„Åó„Å¶‰Ωï„Çà„ÇäÂÆ∂Êóè„ÄÇÂ§ö„Åè„ÅÆ‰∫∫„Åå„ÉÅ„Éº„É†„Å®„Å™„Å£„Å¶ÊîØ„Åà„Å¶„ÅÑ„Åæ„Åô„ÄÇ"},
                    {"id": "s13_04", "speaker": "kazuo", "text": "ÂÆ∂„Å´„ÅÑ„Çâ„Çå„Çã„ÅÆ„ÅØ„ÄÅ„Åø„Å™„Åï„Çì„ÅÆ„Åä„Åã„Åí„Å†„Å™„ÄÇ„ÅÇ„Çä„Åå„Å®„ÅÜ„ÄÇ"},
                    {"id": "s13_05", "speaker": "narration", "text": "ÊÇ£ËÄÖ„Åï„Çì„ÅÆ„ÄåÂÆ∂„Å´„ÅÑ„Åü„ÅÑ„Äç„Å®„ÅÑ„ÅÜÊÄù„ÅÑ„Å´ÂØÑ„ÇäÊ∑ª„ÅÑ„Å™„Åå„Çâ„ÄÅ„Åù„ÅÆ‰∫∫„Çâ„Åó„ÅÑÁîüÊ¥ª„ÇíÊîØÊè¥„Åô„Çã„ÄÇ„Åù„Çå„ÅåÂú®ÂÆÖÁôÇÈ§ä„ÇíÊîØ„Åà„ÇãË®™ÂïèÁúãË≠∑„ÅÆÂΩπÂâ≤„Åß„Åô„ÄÇ"},
                    {"id": "s13_06", "speaker": "narration", "text": "ÁöÜ„Åï„Çì„ÇÇ„ÄÅÂú∞Âüü„ÅÆÂ§öËÅ∑Á®ÆÈÄ£Êê∫„Å´„Å§„ÅÑ„Å¶Â≠¶„Å≥„ÄÅ„ÉÅ„Éº„É†„ÅÆ‰∏ÄÂì°„Å®„Åó„Å¶Ê¥ªË∫ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ"}
                ],
                "knowledge": {
                    "title": "Âú®ÂÆÖÁôÇÈ§ä„ÇíÊîØ„Åà„ÇãÂ§öËÅ∑Á®ÆÈÄ£Êê∫",
                    "text": "„Äê‰∏ª„Å™Â∞ÇÈñÄËÅ∑„Å®ÂΩπÂâ≤„Äë\n„ÉªÂåªÂ∏´ÔºöË®∫Êñ≠„ÉªÊ≤ªÁôÇÊñπÈáù„ÅÆÊ±∫ÂÆö\n„ÉªË®™ÂïèÁúãË≠∑Â∏´ÔºöÁä∂ÊÖãË¶≥ÂØü„ÉªÂåªÁôÇÂá¶ÁΩÆ\n„Éª„Ç±„Ç¢„Éû„Éç„Ç∏„É£„ÉºÔºö„Ç±„Ç¢„Éó„É©„É≥‰ΩúÊàê\n„ÉªËñ¨Ââ§Â∏´ÔºöÊúçËñ¨ÁÆ°ÁêÜ„ÉªÊåáÂ∞é\n„ÉªÁêÜÂ≠¶ÁôÇÊ≥ïÂ£´Ôºö„É™„Éè„Éì„É™„ÉÜ„Éº„Ç∑„Éß„É≥\n„Éª‰ªãË≠∑Á¶èÁ•âÂ£´ÔºöÁîüÊ¥ªÊè¥Âä©"
                }
            }
        ]
    };

    // „Ç≠„É£„É©„ÇØ„Çø„ÉºÊÉÖÂ†±
    const characters = {
        kazuo: { name: "ËÅñÈö∑‰∏ÄÁî∑", folder: "kazuo_expressions" },
        ichiko: { name: "ËÅñÈö∑Â∏ÇÂ≠ê", folder: "ichiko_expressions" },
        yamada: { name: "Â±±Áî∞ÁúãË≠∑Â∏´", folder: "yamada_expressions" },
        doctor: { name: "‰∏ªÊ≤ªÂåª", folder: "doctor_expressions" },
        pharmacist: { name: "Ëñ¨Ââ§Â∏´", folder: "pharmacist_expressions" },
        sato: { name: "‰ΩêËó§„Ç±„Ç¢„Éû„Éç", folder: "sato_expressions" }
    };

    const backgrounds = {
        hospital_room: "backgrounds/bg_hospital_room.png",
        home_living: "backgrounds/bg_home_living.png",
        home_bedroom: "backgrounds/bg_home_bedroom.png",
        pharmacy: "backgrounds/bg_pharmacy.png",
        clinic: "backgrounds/bg_clinic.png",
        map_town: "maps/map_town.png",
        map_hospital: "maps/map_hospital.png",
        map_home: "maps/map_home.png"
    };

    const bgmFiles = {
        main_theme: "bgm/bgm_main_theme.mp3",
        daily: "bgm/bgm_daily.mp3",
        medical: "bgm/bgm_medical.mp3",
        heartwarming: "bgm/bgm_heartwarming.mp3"
    };

    const speakerNames = {
        narration: "„Éä„É¨„Éº„Ç∑„Éß„É≥",
        kazuo: "ËÅñÈö∑‰∏ÄÁî∑",
        ichiko: "Â∏ÇÂ≠ê",
        yamada: "Â±±Áî∞ÁúãË≠∑Â∏´",
        doctor: "‰∏ªÊ≤ªÂåª",
        pharmacist: "Ëñ¨Ââ§Â∏´",
        sato: "‰ΩêËó§„Ç±„Ç¢„Éû„Éç"
    };

    // „Ç≤„Éº„É†Áä∂ÊÖã
    let currentSceneIndex = 0;
    let currentCutIndex = 0;
    let bgmEnabled = true;
    let voiceEnabled = true;
    let currentBgm = null;
    let currentVoice = null;
    let visitedLocations = new Set();
    let waitingForMapSelection = false;
    let completedScenes = new Set(); // ÂÆå‰∫Ü„Åó„Åü„Ç∑„Éº„É≥„ÇíËøΩË∑°

    // „Ç∑„Éº„É≥‚ÜíÈÉ®Â±ã„Éû„ÉÉ„Éî„É≥„Ç∞Ôºà„Çµ„ÉñMAPÁî®Ôºâ
    const SCENE_ROOM_MAP = {
        2: 'hospital_room',     // ÁóÖÂÆ§
        3: 'home_living',       // „É™„Éì„É≥„Ç∞
        4: 'home_bedroom',      // ÂØùÂÆ§
        5: 'home_bathroom',     // Êµ¥ÂÆ§ÔºàÂÖ•Êµ¥‰ªãÂä©Ôºâ
        6: 'home_bedroom',      // ÂØùÂÆ§ÔºàÂëºÂê∏„É™„Éè„Éì„É™Ôºâ
        9: 'home_living',       // „É™„Éì„É≥„Ç∞Ôºà„Ç±„Ç¢„Éû„ÉçË®™ÂïèÔºâ
        10: 'home_living',      // „É™„Éì„É≥„Ç∞ÔºàÂ¶ª„Å®„ÅÆ‰ºöË©±Ôºâ
        11: 'home_bedroom'      // ÂØùÂÆ§ÔºàÊÄ•Â§âÊôÇÔºâ
    };

    // ÂàùÊúüÂåñ
    function init() {
        document.getElementById('startButton').addEventListener('click', startGame);
        document.getElementById('restartBtn').addEventListener('click', restartGame);
        document.getElementById('sceneSelectBtn').addEventListener('click', showSceneSelect);
        document.getElementById('sceneSelectClose').addEventListener('click', closeSceneSelect);
        document.getElementById('backToMap').addEventListener('click', showMap);
        document.getElementById('bgmToggle').addEventListener('click', toggleBgm);
        document.getElementById('voiceToggle').addEventListener('click', toggleVoice);
        document.getElementById('knowledgeClose').addEventListener('click', closeKnowledge);
        document.getElementById('quizSubmit').addEventListener('click', submitQuiz);
        document.getElementById('quizContinue').addEventListener('click', closeQuiz);
        document.getElementById('prevBtn').addEventListener('click', prevCut);
        document.getElementById('nextBtn').addEventListener('click', nextCut);

        // Ë°ó‰∏¶„ÅøMAP„Éû„Éº„Ç´„Éº„Ç§„Éô„É≥„Éà
        document.querySelectorAll('#mapScreen .location-marker').forEach(marker => {
            marker.addEventListener('click', () => handleMarkerClick(marker.dataset.location));
        });

        // ÁóÖÈô¢MAP„Éû„Éº„Ç´„Éº„Ç§„Éô„É≥„Éà
        document.querySelectorAll('#hospitalMapScreen .location-marker').forEach(marker => {
            marker.addEventListener('click', () => handleSubMapMarkerClick('hospital', marker.dataset.location, marker.dataset.scene));
        });

        // Ëá™ÂÆÖMAP„Éû„Éº„Ç´„Éº„Ç§„Éô„É≥„Éà
        document.querySelectorAll('#homeMapScreen .location-marker').forEach(marker => {
            marker.addEventListener('click', () => handleSubMapMarkerClick('home', marker.dataset.location, marker.dataset.scene));
        });

        // „Çµ„ÉñMAP„Åã„ÇâË°ó‰∏¶„ÅøMAP„Å∏Êàª„Çã„Éú„Çø„É≥
        document.getElementById('backToTownFromHospital').addEventListener('click', backToTownMap);
        document.getElementById('backToTownFromHome').addEventListener('click', backToTownMap);
    }

    // „Ç≤„Éº„É†ÈñãÂßã
    function startGame() {
        document.getElementById('titleScreen').style.display = 'none';
        currentSceneIndex = 0;
        currentCutIndex = 0;

        // „Ç§„É≥„Éà„É≠„Ç∑„Éº„É≥„ÇíÈñãÂßã
        document.getElementById('mapScreen').style.display = 'none';
        document.getElementById('gameScreen').style.display = 'block';
        renderScene();
    }

    // MAPË°®Á§∫ÔºàÊ¨°„ÅÆÁõÆÁöÑÂú∞„Å´Âøú„Åò„Å¶ÈÅ©Âàá„Å™MAP„ÇíË°®Á§∫Ôºâ
    function showMap() {
        stopVoice();
        document.getElementById('gameScreen').style.display = 'none';
        document.getElementById('hospitalMapScreen').style.display = 'none';
        document.getElementById('homeMapScreen').style.display = 'none';

        const nextLoc = getNextLocation();

        // Ê¨°„ÅÆÁõÆÁöÑÂú∞„ÅåÁóÖÈô¢„ÅÆÂ†¥Âêà„ÅØË°ó‰∏¶„ÅøMAPÔºàÁóÖÈô¢„Å∏ÁßªÂãï„Åô„Çã„Åü„ÇÅÔºâ
        // Ê¨°„ÅÆÁõÆÁöÑÂú∞„ÅåËá™ÂÆÖ„ÅÆÂ†¥Âêà„ÄÅÁèæÂú®„ÅÆ„Ç∑„Éº„É≥„Å´„Çà„Å£„Å¶Âà§Êñ≠
        const currentSceneId = scenarioData.scenes[currentSceneIndex].id;

        // ÁèæÂú®Ëá™ÂÆÖ„Å´„ÅÑ„Å¶„ÄÅÊ¨°„ÇÇËá™ÂÆÖ„ÅÆÂ†¥Âêà„ÅØËá™ÂÆÖMAP
        if (nextLoc === 'home' && [3, 4, 5, 6, 9, 10].includes(currentSceneId)) {
            document.getElementById('homeMapScreen').style.display = 'block';
            updateSubMapMarkers('home');
            return;
        }

        // „Åù„Çå‰ª•Â§ñ„ÅØË°ó‰∏¶„ÅøMAP„Å∏
        document.getElementById('mapScreen').style.display = 'block';
        waitingForMapSelection = true;
        updateMarkers();

        if (nextLoc) {
            document.getElementById('mapTitle').textContent = 'Ê¨°„ÅÆÂ†¥ÊâÄ„Å∏ÁßªÂãï';
            document.getElementById('mapInstruction').textContent = 'ÂÖâ„Å£„Å¶„ÅÑ„Çã„Éû„Éº„Ç´„Éº„Çí„ÇØ„É™„ÉÉ„ÇØ';
        } else {
            document.getElementById('mapTitle').textContent = 'Â≠¶ÁøíÂÆå‰∫ÜÔºÅ';
            document.getElementById('mapInstruction').textContent = '„ÅäÁñ≤„ÇåÊßò„Åß„Åó„Åü';
        }
    }

    // Ê¨°„ÅÆÂ†¥ÊâÄ„ÇíÂèñÂæó
    function getNextLocation() {
        if (currentSceneIndex >= SCENE_FLOW.length - 1) return null;
        return SCENE_FLOW[currentSceneIndex].nextLocation;
    }

    // „Éû„Éº„Ç´„ÉºÊõ¥Êñ∞Ôºà„Ç∑„Éä„É™„Ç™È†ÜÂ∫è„Å´Âæì„ÅÑ„ÄÅÊ¨°„ÅÆÁõÆÁöÑÂú∞„ÅÆ„ÅøÊúâÂäπÂåñÔºâ
    function updateMarkers() {
        const nextLoc = getNextLocation();
        const currentLoc = SCENE_LOCATION_MAP[scenarioData.scenes[currentSceneIndex].id];

        // Ë°ó‰∏¶„ÅøMAP„ÅÆ„Éû„Éº„Ç´„Éº„ÅÆ„ÅøÊõ¥Êñ∞Ôºà„Çµ„ÉñMAP„ÅØÈô§Â§ñÔºâ
        document.querySelectorAll('#mapScreen .location-marker').forEach(marker => {
            const loc = marker.dataset.location;
            marker.classList.remove('next-destination', 'current', 'visited', 'disabled');
            marker.style.cursor = 'default';

            if (loc === currentLoc) {
                marker.classList.add('current');
                visitedLocations.add(loc);
            }

            if (visitedLocations.has(loc)) {
                marker.classList.add('visited');
            }

            if (waitingForMapSelection && loc === nextLoc) {
                // Ê¨°„ÅÆÁõÆÁöÑÂú∞„ÅØÊúâÂäπÂåñ
                marker.classList.add('next-destination');
                marker.style.cursor = 'pointer';
            } else if (waitingForMapSelection) {
                // Ê¨°„ÅÆÁõÆÁöÑÂú∞‰ª•Â§ñ„ÅØÁÑ°ÂäπÂåñÔºàÂçäÈÄèÊòéÔºâ
                marker.classList.add('disabled');
            }
        });
    }

    // „Éû„Éº„Ç´„Éº„ÇØ„É™„ÉÉ„ÇØÂá¶ÁêÜÔºàË°ó‰∏¶„ÅøMAPÔºâ
    function handleMarkerClick(location) {
        if (!waitingForMapSelection) return;

        // ÁÑ°ÂäπÂåñ„Åï„Çå„Åü„Éû„Éº„Ç´„Éº„ÅØÁÑ°Ë¶ñ
        const marker = document.querySelector(`#mapScreen [data-location="${location}"]`);
        if (marker && marker.classList.contains('disabled')) return;

        const nextLoc = getNextLocation();
        if (location !== nextLoc) return;

        // ÁóÖÈô¢„Åæ„Åü„ÅØËá™ÂÆÖ„ÅÆÂ†¥Âêà„ÅØ„Çµ„ÉñMAP„ÇíË°®Á§∫
        if (location === 'hospital') {
            showHospitalMap();
            return;
        }
        if (location === 'home') {
            showHomeMap();
            return;
        }

        waitingForMapSelection = false;
        visitedLocations.add(location);

        // Ê¨°„ÅÆ„Ç∑„Éº„É≥„Å∏
        currentSceneIndex++;
        currentCutIndex = 0;

        document.getElementById('mapScreen').style.display = 'none';
        document.getElementById('gameScreen').style.display = 'block';
        renderScene();
    }

    // ÁóÖÈô¢MAPË°®Á§∫
    function showHospitalMap() {
        document.getElementById('mapScreen').style.display = 'none';
        document.getElementById('hospitalMapScreen').style.display = 'block';
        updateSubMapMarkers('hospital');
    }

    // Ëá™ÂÆÖMAPË°®Á§∫
    function showHomeMap() {
        document.getElementById('mapScreen').style.display = 'none';
        document.getElementById('homeMapScreen').style.display = 'block';
        updateSubMapMarkers('home');
    }

    // Ë°ó‰∏¶„ÅøMAP„Å∏Êàª„Çã
    function backToTownMap() {
        document.getElementById('hospitalMapScreen').style.display = 'none';
        document.getElementById('homeMapScreen').style.display = 'none';
        document.getElementById('mapScreen').style.display = 'block';
    }

    // „Çµ„ÉñMAP„Éû„Éº„Ç´„ÉºÊõ¥Êñ∞Ôºà„Ç∑„Éä„É™„Ç™È†ÜÂ∫è„Å´Âæì„ÅÑ„ÄÅÊ¨°„Å´ÂøÖË¶Å„Å™„Éû„Éº„Ç´„Éº„ÅÆ„ÅøÊúâÂäπÂåñÔºâ
    function updateSubMapMarkers(mapType) {
        const mapId = mapType === 'hospital' ? 'hospitalMapScreen' : 'homeMapScreen';

        // Ê¨°„ÅÆ„Ç∑„Éº„É≥„ÇíÂèñÂæó
        const nextSceneIndex = currentSceneIndex + 1;
        if (nextSceneIndex >= scenarioData.scenes.length) {
            // „Åô„Åπ„Å¶„ÅÆ„Éû„Éº„Ç´„Éº„ÇíÁÑ°ÂäπÂåñ
            document.querySelectorAll(`#${mapId} .location-marker`).forEach(marker => {
                marker.classList.add('disabled');
                marker.classList.remove('next-destination');
                marker.style.cursor = 'default';
            });
            return;
        }

        const nextSceneId = scenarioData.scenes[nextSceneIndex].id;
        const requiredRoom = SCENE_ROOM_MAP[nextSceneId];

        document.querySelectorAll(`#${mapId} .location-marker`).forEach(marker => {
            const markerLocation = marker.dataset.location;

            marker.classList.remove('next-destination', 'disabled', 'completed');

            if (markerLocation === requiredRoom) {
                // Ê¨°„Å´ÂøÖË¶Å„Å™Â†¥ÊâÄ - ÂãïÁöÑ„Å´„Ç∑„Éº„É≥ID„ÇíË®≠ÂÆö
                marker.classList.add('next-destination');
                marker.style.cursor = 'pointer';
                marker.dataset.scene = nextSceneId;
            } else {
                // „Åæ„Å†ÂøÖË¶Å„Å™„ÅÑÂ†¥ÊâÄ„ÅØÂçäÈÄèÊòé„Å´
                marker.classList.add('disabled');
                marker.style.cursor = 'default';
            }
        });
    }

    // „Çµ„ÉñMAP„Éû„Éº„Ç´„Éº„ÇØ„É™„ÉÉ„ÇØÂá¶ÁêÜ
    function handleSubMapMarkerClick(mapType, location, sceneId) {
        if (!sceneId) return; // „Ç∑„Éº„É≥„ÅåË®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑÂ†¥ÊâÄ„ÅØ„Çπ„Ç≠„ÉÉ„Éó

        // ÁÑ°ÂäπÂåñ„Åï„Çå„Åü„Éû„Éº„Ç´„Éº„ÅØÁÑ°Ë¶ñÔºàCSS pointer-events: none„ÅÆ„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„ÉóÔºâ
        const mapId = mapType === 'hospital' ? 'hospitalMapScreen' : 'homeMapScreen';
        const marker = document.querySelector(`#${mapId} [data-location="${location}"]`);
        if (marker && marker.classList.contains('disabled')) return;

        waitingForMapSelection = false;
        visitedLocations.add(mapType);

        // ÊåáÂÆö„Åï„Çå„Åü„Ç∑„Éº„É≥„Å∏ÁßªÂãï
        const targetSceneIndex = scenarioData.scenes.findIndex(s => s.id === parseInt(sceneId));
        if (targetSceneIndex === -1) return;

        currentSceneIndex = targetSceneIndex;
        currentCutIndex = 0;

        document.getElementById('hospitalMapScreen').style.display = 'none';
        document.getElementById('homeMapScreen').style.display = 'none';
        document.getElementById('gameScreen').style.display = 'block';
        renderScene();
    }

    // „Ç∑„Éº„É≥ÊèèÁîª
    function renderScene() {
        const scene = scenarioData.scenes[currentSceneIndex];
        const cut = scene.cuts[currentCutIndex];

        // ËÉåÊôØË®≠ÂÆö
        const bgLayer = document.getElementById('backgroundLayer');
        if (scene.background) {
            bgLayer.style.backgroundImage = `url('${backgrounds[scene.background]}')`;
        } else {
            bgLayer.style.backgroundImage = 'none';
            bgLayer.style.background = 'linear-gradient(135deg, #2d5a27 0%, #1e3a1a 100%)';
        }

        // BGM
        if (bgmEnabled && scene.bgm) {
            playBgm(scene.bgm);
        }

        // „Ç≠„É£„É©„ÇØ„Çø„ÉºÔºàcutId„ÇíÊ∏°„Åó„Å¶Ë°®ÊÉÖ„Ç¨„Ç§„Éâ„Åã„ÇâÂèñÂæóÔºâ
        // ‚ÄªÂÖà„Å´renderCharacters„ÇíÂëº„Çì„ÅßÂãïÁîª„ÅÆÊúâÁÑ°„ÇíÂà§ÂÆö
        renderCharacters(cut.id);

        // Èü≥Â£∞ÔºàÂãïÁîª„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅØ„Çπ„Ç≠„ÉÉ„Éó - ÂãïÁîªÂÜÖ„Å´Èü≥Â£∞„ÅåÂê´„Åæ„Çå„ÇãÔºâ
        if (voiceEnabled && cut.id && !currentCutHasVideo) {
            playVoice(cut.id);
        }

        // „Çª„É™„Éï
        const speaker = cut.speaker;
        const speakerEl = document.getElementById('speakerName');
        speakerEl.textContent = speakerNames[speaker] || speaker;
        speakerEl.className = '';
        document.getElementById('dialogText').className = '';

        if (speaker === 'narration') {
            speakerEl.classList.add('narrator');
        } else if (cut.type === 'thought') {
            speakerEl.classList.add('thought');
            document.getElementById('dialogText').classList.add('thought');
        }

        document.getElementById('dialogText').textContent = cut.text;
        document.getElementById('sceneHeader').textContent = `Scene ${scene.id}: ${scene.title} (${currentCutIndex + 1}/${scene.cuts.length})`;

        updateProgress();
        updateNavButtons();
    }

    // „Ç≠„É£„É©„ÇØ„Çø„ÉºÊèèÁîªÔºàË°®ÊÉÖ„Ç¨„Ç§„ÉâÂØæÂøú„ÉªÂãïÁîªÂØæÂøúÔºâ
    function renderCharacters(cutId) {
        document.getElementById('charLeft').innerHTML = '';
        document.getElementById('charCenter').innerHTML = '';
        document.getElementById('charRight').innerHTML = '';

        // ÂãïÁîª„Éï„É©„Ç∞„Çí„É™„Çª„ÉÉ„Éà
        currentCutHasVideo = false;

        // Ë°®ÊÉÖ„Ç¨„Ç§„Éâ„Åã„Çâ„Ç≠„É£„É©„ÇØ„Çø„ÉºÊÉÖÂ†±„ÇíÂèñÂæó
        const charData = expressionGuide[cutId];
        if (!charData || charData.length === 0) return;

        // positionÂà•„Å´ÊåØ„ÇäÂàÜ„ÅëÔºàÂãïÁîªÂØæÂøúÔºâ
        charData.forEach(charInfo => {
            const position = charInfo.position || 'center';
            const mediaHtml = getCharacterMedia(charInfo.id, charInfo.expression, cutId);

            if (position === 'left') {
                document.getElementById('charLeft').innerHTML = mediaHtml;
            } else if (position === 'right') {
                document.getElementById('charRight').innerHTML = mediaHtml;
            } else {
                document.getElementById('charCenter').innerHTML = mediaHtml;
            }
        });
    }

    // ÂãïÁîª„Éï„Ç°„Ç§„É´„ÅÆ„Éû„ÉÉ„Éî„É≥„Ç∞ÔºàcutId_charId: true „ÅßÂãïÁîª„Åå„ÅÇ„Çã„Åì„Å®„ÇíÁ§∫„ÅôÔºâ
    // SadTalker„ÅßÁîüÊàê„Åó„ÅüÂãïÁîª„Çí„Åì„Åì„Å´ÁôªÈå≤
    const videoFiles = {
        // ‰æã: 's03_01_kazuo': true,
        // ‰æã: 's04_01_yamada': true,
    };

    // ÁèæÂú®„ÅÆ„Ç´„ÉÉ„Éà„ÅßÂãïÁîª„Çí‰ΩøÁî®„Åó„Å¶„ÅÑ„Çã„Åã„ÅÆ„Éï„É©„Ç∞
    let currentCutHasVideo = false;

    function getCharacterMedia(charId, expression, cutId) {
        const char = characters[charId];
        if (!char) return '';

        // ÂãïÁîª„Éï„Ç°„Ç§„É´„ÅåÂ≠òÂú®„Åô„Çã„Åã„ÉÅ„Çß„ÉÉ„ÇØ
        const videoKey = `${cutId}_${charId}`;
        if (videoFiles[videoKey]) {
            currentCutHasVideo = true;
            const videoPath = `videos/${videoKey}.mp4`;
            return `<video src="${videoPath}" autoplay playsinline muted="false" onended="onVideoEnded()" onerror="this.outerHTML=getCharacterImgFallback('${charId}', '${expression}')"></video>`;
        }

        // ÂãïÁîª„Åå„Å™„ÅÑÂ†¥Âêà„ÅØÈùôÊ≠¢Áîª„Çí‰ΩøÁî®
        let imgPath;
        if (expression) {
            imgPath = `characters/${char.folder}/${expression}.png`;
        } else {
            imgPath = charId === 'kazuo'
                ? `characters/${char.folder}/kazuo_general_05_neutral.png`
                : `characters/${char.folder}/${charId}_05_neutral.png`;
        }
        return `<img src="${imgPath}" alt="${char.name}" onerror="this.style.display='none'">`;
    }

    // ÂãïÁîªË™≠„ÅøËæº„Åø„Ç®„É©„ÉºÊôÇ„ÅÆ„Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ
    function getCharacterImgFallback(charId, expression) {
        const char = characters[charId];
        if (!char) return '';
        let imgPath;
        if (expression) {
            imgPath = `characters/${char.folder}/${expression}.png`;
        } else {
            imgPath = charId === 'kazuo'
                ? `characters/${char.folder}/kazuo_general_05_neutral.png`
                : `characters/${char.folder}/${charId}_05_neutral.png`;
        }
        return `<img src="${imgPath}" alt="${char.name}" onerror="this.style.display='none'">`;
    }

    // ÂãïÁîªÁµÇ‰∫ÜÊôÇ„ÅÆ„Ç≥„Éº„É´„Éê„ÉÉ„ÇØ
    function onVideoEnded() {
        // ÂøÖË¶Å„Å´Âøú„Åò„Å¶Âá¶ÁêÜ„ÇíËøΩÂä†
        console.log('Video ended');
    }

    // ÂæåÊñπ‰∫íÊèõÊÄß„ÅÆ„Åü„ÇÅ
    function getCharacterImg(charId, expression) {
        return getCharacterMedia(charId, expression, '');
    }

    // BGM
    function playBgm(bgmId) {
        if (currentBgm && currentBgm.src.includes(bgmFiles[bgmId])) return;
        stopBgm();
        currentBgm = new Audio(bgmFiles[bgmId]);
        currentBgm.loop = true;
        currentBgm.volume = 0.15;
        currentBgm.play().catch(e => console.log('BGM:', e));
    }

    function stopBgm() {
        if (currentBgm) { currentBgm.pause(); currentBgm = null; }
    }

    function toggleBgm() {
        bgmEnabled = !bgmEnabled;
        const btn = document.getElementById('bgmToggle');
        if (bgmEnabled) {
            btn.textContent = 'BGM ON';
            btn.classList.remove('off');
            const scene = scenarioData.scenes[currentSceneIndex];
            if (scene.bgm) playBgm(scene.bgm);
        } else {
            btn.textContent = 'BGM OFF';
            btn.classList.add('off');
            stopBgm();
        }
    }

    // Èü≥Â£∞
    function playVoice(cutId) {
        stopVoice();
        currentVoice = new Audio(`audio/${cutId}.mp3`);
        currentVoice.volume = 0.8;
        currentVoice.play().catch(e => console.log('Voice:', e));
    }

    function stopVoice() {
        if (currentVoice) { currentVoice.pause(); currentVoice = null; }
    }

    function toggleVoice() {
        voiceEnabled = !voiceEnabled;
        const btn = document.getElementById('voiceToggle');
        if (voiceEnabled) {
            btn.textContent = 'Èü≥Â£∞ ON';
            btn.classList.remove('off');
        } else {
            btn.textContent = 'Èü≥Â£∞ OFF';
            btn.classList.add('off');
            stopVoice();
        }
    }

    // „Éó„É≠„Ç∞„É¨„Çπ
    function updateProgress() {
        const scene = scenarioData.scenes[currentSceneIndex];
        const progress = ((currentCutIndex + 1) / scene.cuts.length) * 100;
        document.getElementById('progressFill').style.width = progress + '%';
    }

    // „Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥
    function updateNavButtons() {
        const scene = scenarioData.scenes[currentSceneIndex];
        document.getElementById('prevBtn').disabled = currentCutIndex === 0 && currentSceneIndex === 0;
        document.getElementById('nextBtn').textContent = currentCutIndex >= scene.cuts.length - 1 ? '„Ç∑„Éº„É≥ÁµÇ‰∫Ü' : 'Ê¨°„Å∏ ‚Üí';
    }

    function prevCut() {
        if (currentCutIndex > 0) {
            currentCutIndex--;
            renderScene();
        }
    }

    function nextCut() {
        const scene = scenarioData.scenes[currentSceneIndex];
        if (currentCutIndex < scene.cuts.length - 1) {
            currentCutIndex++;
            renderScene();
        } else {
            endScene();
        }
    }

    // „Ç∑„Éº„É≥ÁµÇ‰∫Ü
    function endScene() {
        const scene = scenarioData.scenes[currentSceneIndex];
        // „Ç∑„Éº„É≥ÂÆå‰∫Ü„ÇíË®òÈå≤
        completedScenes.add(scene.id);

        if (scene.knowledge) {
            showKnowledge(scene.knowledge);
        } else if (scene.quiz) {
            showQuiz(scene.quiz);
        } else {
            goToNextScene();
        }
    }

    // ÊúÄÂàù„Åã„Çâ„ÇÑ„ÇäÁõ¥„Åô
    function restartGame() {
        if (!confirm('ÊúÄÂàù„Åã„Çâ„ÇÑ„ÇäÁõ¥„Åó„Åæ„Åô„ÅãÔºü')) return;
        stopVoice();
        stopBgm();
        currentSceneIndex = 0;
        currentCutIndex = 0;
        completedScenes.clear();
        visitedLocations.clear();
        document.getElementById('gameScreen').style.display = 'none';
        document.getElementById('hospitalMapScreen').style.display = 'none';
        document.getElementById('homeMapScreen').style.display = 'none';
        document.getElementById('mapScreen').style.display = 'none';
        document.getElementById('titleScreen').style.display = 'flex';
    }

    // „Ç∑„Éº„É≥ÈÅ∏Êäû„Éë„Éç„É´Ë°®Á§∫
    function showSceneSelect() {
        const sceneList = document.getElementById('sceneList');
        sceneList.innerHTML = '';

        scenarioData.scenes.forEach((scene, index) => {
            const div = document.createElement('div');
            div.className = 'scene-item';

            // ÁèæÂú®„ÅÆ„Ç∑„Éº„É≥
            if (index === currentSceneIndex) {
                div.classList.add('current');
            }
            // ÂÆå‰∫ÜÊ∏à„Åø„Ç∑„Éº„É≥
            else if (completedScenes.has(scene.id)) {
                div.classList.add('completed');
            }

            div.innerHTML = `
                <div class="scene-number">${scene.id}</div>
                <div class="scene-title">${scene.title}</div>
            `;

            // „Åô„Åπ„Å¶„ÅÆ„Ç∑„Éº„É≥„Çí„ÇØ„É™„ÉÉ„ÇØÂèØËÉΩ„Å´
            div.addEventListener('click', () => goToScene(index));

            sceneList.appendChild(div);
        });

        document.getElementById('sceneSelectPanel').style.display = 'flex';
    }

    // „Ç∑„Éº„É≥ÈÅ∏Êäû„Éë„Éç„É´„ÇíÈñâ„Åò„Çã
    function closeSceneSelect() {
        document.getElementById('sceneSelectPanel').style.display = 'none';
    }

    // ÊåáÂÆö„Ç∑„Éº„É≥„Å∏„Ç∏„É£„É≥„Éó
    function goToScene(sceneIndex) {
        closeSceneSelect();
        currentSceneIndex = sceneIndex;
        currentCutIndex = 0;

        document.getElementById('titleScreen').style.display = 'none';
        document.getElementById('mapScreen').style.display = 'none';
        document.getElementById('hospitalMapScreen').style.display = 'none';
        document.getElementById('homeMapScreen').style.display = 'none';
        document.getElementById('gameScreen').style.display = 'block';

        renderScene();
    }

    function goToNextScene() {
        const nextLoc = getNextLocation();
        if (nextLoc) {
            showMap();
        } else if (currentSceneIndex < scenarioData.scenes.length - 1) {
            currentSceneIndex++;
            currentCutIndex = 0;
            renderScene();
        } else {
            alert('Â≠¶ÁøíÂÆå‰∫ÜÔºÅ„ÅäÁñ≤„ÇåÊßò„Åß„Åó„Åü„ÄÇ');
            location.reload();
        }
    }

    // Áü•Ë≠òËß£Ë™¨
    function showKnowledge(knowledge) {
        document.getElementById('knowledgeTitle').textContent = knowledge.title;
        document.getElementById('knowledgeText').textContent = knowledge.text;
        document.getElementById('knowledgePanel').style.display = 'flex';
    }

    function closeKnowledge() {
        document.getElementById('knowledgePanel').style.display = 'none';
        const scene = scenarioData.scenes[currentSceneIndex];
        if (scene.quiz) {
            showQuiz(scene.quiz);
        } else {
            goToNextScene();
        }
    }

    // „ÇØ„Ç§„Ç∫
    let selectedOptions = new Set();
    let quizData = null;

    function showQuiz(quiz) {
        quizData = quiz;
        selectedOptions.clear();
        document.getElementById('quizQuestion').textContent = quiz.question;

        const container = document.getElementById('quizOptions');
        container.innerHTML = '';
        quiz.options.forEach((opt, i) => {
            const el = document.createElement('div');
            el.className = 'quiz-option';
            el.innerHTML = `<span class="option-marker">${String.fromCharCode(65 + i)}</span><span>${opt.text}</span>`;
            el.addEventListener('click', () => selectOption(i, el, quiz.multipleAnswer));
            container.appendChild(el);
        });

        document.getElementById('quizFeedback').className = 'quiz-feedback';
        document.getElementById('quizSubmit').style.display = 'block';
        document.getElementById('quizSubmit').disabled = true;
        document.getElementById('quizContinue').style.display = 'none';
        document.getElementById('quizPanel').style.display = 'flex';
    }

    function selectOption(index, element, multipleAnswer) {
        if (element.classList.contains('disabled')) return;
        if (multipleAnswer) {
            if (selectedOptions.has(index)) {
                selectedOptions.delete(index);
                element.classList.remove('selected');
            } else {
                selectedOptions.add(index);
                element.classList.add('selected');
            }
        } else {
            document.querySelectorAll('.quiz-option').forEach(el => el.classList.remove('selected'));
            selectedOptions.clear();
            selectedOptions.add(index);
            element.classList.add('selected');
        }
        document.getElementById('quizSubmit').disabled = selectedOptions.size === 0;
    }

    function submitQuiz() {
        const options = document.querySelectorAll('.quiz-option');
        let allCorrect = true;
        let correctCount = 0;
        let selectedCorrectCount = 0;

        quizData.options.forEach((opt, i) => {
            options[i].classList.add('disabled');
            if (opt.correct) {
                correctCount++;
                options[i].classList.add('correct');
                if (selectedOptions.has(i)) selectedCorrectCount++;
            } else if (selectedOptions.has(i)) {
                options[i].classList.add('incorrect');
                allCorrect = false;
            }
        });

        if (selectedCorrectCount !== correctCount) allCorrect = false;

        const fb = document.getElementById('quizFeedback');
        fb.className = allCorrect ? 'quiz-feedback show correct' : 'quiz-feedback show incorrect';
        fb.innerHTML = allCorrect ? '<strong>‚úÖ Ê≠£Ëß£„Åß„ÅôÔºÅ</strong>' : '<strong>‚ùå ‰∏çÊ≠£Ëß£„Åß„Åô</strong><br>Ê≠£Ëß£„ÅÆÈÅ∏ÊäûËÇ¢„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ';

        document.getElementById('quizSubmit').style.display = 'none';
        document.getElementById('quizContinue').style.display = 'block';
    }

    function closeQuiz() {
        document.getElementById('quizPanel').style.display = 'none';
        goToNextScene();
    }

    init();
    </script>
</body>
</html>
